\section{User guide}

\subsection{Simulator features}

The TMS320C3X is a 32-bit floating-point DSP from Texas Instrument.
The UNISIM TMS320C3X simulator features:
\begin{itemize}
\item Simulation of the TMS320C3X Instruction set
\item A simulation speed average around 10 MIPS and up to 28 MIPS on a 2.4 Ghz Core2 Duo machine under Linux
\item Support for instruction cache
\item Support for TI COFF v0, v1, and v2 (either with big-endian or little-endian headers)
\item Built-in debugger (Inline Debugger)
\item Support for GDB serial remote protocol (GDB server)
\item Support for TI C I/O
\end{itemize}

\textit{Note: Support for the GDB serial remote protocol is experimental in the sense that although some GDB versions supported the TMS320C3X target (see~\url{http://www.elec.canterbury.ac.nz/c4x/doc/c4x-tools.html}), these versions are no longer available on the web. As a consequence this simulator functionality could not be tested and validated for the TMS320C3X target but only for arM7/9, PowerPC and HCS12X targets.}

\begin{figure}[!h]
	\begin{center}
		\includegraphics[width=\textwidth]{tms320c3x/fig_tms320c3x.pdf}
	\end{center}
	\caption{TMS320C3X simplified schematic.}
	\label{fig:tms320c3x}
\end{figure}

\subsection{Status of implementation}

The UNISIM TMS320C3X has been developed using the following documentation:
\begin{itemize}
\item TMS320C3x User’s Guide (SPRU031F, 2558539-9761 revision L, March 2004)
\item TMS320C3x/C4x Assembly Language Tools User’s Guide (SPRU035D, June 1998)
\item TMS320C3x/C4x Optimizing C Compiler User’s Guide (SPRU034H, June 1998)
\end{itemize}

Current implementation of the simulator completely decodes the TMS320C3X instruction set.
All registers are present but no on-chip devices are implemented.
The simulator is supposed to have a complete support for:
\begin{itemize}
\item integer instructions (2-ops, 3-ops, parallel ops, load/store)
\item control instructions (branches, delayed branches, RPTS, RPTB)
\item power instructions
\item instructions \texttt{FLOAT}, \texttt{PUSHF}, and \texttt{POPF}
\item interrupt handling
\end{itemize}

The simulator does not implement or partially implement:
\begin{itemize}
\item floating point instructions
\item interlocked instructions
\end{itemize}

The indirect addressing with circular modify and the indirect addressing with bit-reversed modify modes are fully implemented but untested.
The current status of the simulator should allow to run any integer benchmark.

\subsection{Compiling the simulator}

Up-to-date instructions for compiling the simulator are available in file \texttt{INSTALL}.

\subsection{Invoking the simulator}

The general command line format for invoking the simulator is the following:

\begin{verbatim}
tms320c3x [<options>] <binary to simulate>
\end{verbatim}

\noindent The binary to simulate must be a TI's COFF v0, v1 or v2 file. See~\ref{tms320c3x_cross_compiler} to generate such files.
\newline\\
\noindent The command line options of the simulator are:

\begin{itemize}
\item \texttt{--help} or \texttt{-h}: print integrated help message on the screen.
\item \texttt{--get-variables <XML file>} or \texttt{-v <XML file>}: Get the simulation variables (parameters, statistics, \ldots) into a XML file
\item \texttt{--config <XML file>} or \texttt{-c <XML file>}: configures the simulator with the given XML configuration file.
\item \texttt{--get-config <XML file>} or \texttt{-g <XML file>}: Get the simulator default configuration XML file (you can use it to create your own configuration). This option can be combined with option \texttt{-c} to get a new configuration file with existing variables from another file.
\item \texttt{--logger} or \texttt{-l}: Enable the logger.
\item \texttt{--xml-gdb <file>} or \texttt{-x <file>}: processor XML description file for GDB server.
\item \texttt{--gdb-server <port\_number>} or \texttt{-d <port\_number>}: Enable the GDB server and use the given TCP/IP port for communicating with a GDB client.
\item \texttt{--inline-debugger} or \texttt{-i}: Enable the inline debugger (only active if logger option used).
\end{itemize}

\subsection{The Texas Instrument cross-compiler for TMS320C3X}
\label{tms320c3x_cross_compiler}

To compile programs for the TMS320C3X simulator, you can use the free evaluation cross-compiler for TMS320C3X running on a Windows host (SPRC147, TMS320C3x DSK Software) available at \url{http://focus.ti.com/docs/toolsw/folders/print/tmdsdsk33.html}.
This cross-compiler also runs under other x86 operating systems such as Linux or MacOSX using Wine, a Windows emulator (\url{http://www.winehq.org/}).

\textit{Note: Be aware that any call to the C standard library requires linking the program with \texttt{RTS30.LIB}.
Moreover, any call to I/O functions (open, close, read, write, printf, \ldots) requires TI C I/O support enabled in the TMS320C3X simulator.}

The cross-compiler tool chain (\texttt{CL30.EXE, LNK30.EXE, ASM30.EXE, MK30.EXE, ar30.EXE, \ldots}) should be in your \texttt{PATH}.
The shell variable \texttt{C\_DIR} points to the location where cross-compiler should search for the standard C headers and libraries.
Suppose the tool chain is installed in \texttt{C:{\textbackslash}TI}.
Windows users should add the following in their \texttt{AUTOEXEC.BAT}:
\begin{verbatim}
set PATH=C:\TI\TIC3X4X\BIN;%PATH%
set C_DIR=C:\TI\TIC3X4X\INCLUDE;C:\TI\TIC3X4X\LIB
\end{verbatim}
Wine and GNU bash users should add the following in their \texttt{.bashrc}:
\begin{verbatim}
export PATH=${HOME}/.wine/drive_c/TI/TIC3X4X/BIN:${PATH}
export C_DIR=C:\\TI\\TIC3X4X\\INCLUDE\;C:\\TI\\TIC3X4X\\LIB
\end{verbatim}

\subsection{The GNU binutils}

The GNU binutils is a set of open source tools to manipulate binaries. They provide an assembler, a linker, and an object dump utility among others.
The last version, at the time of writing this document, is available at: \url{ftp://ftp.gnu.org/gnu/binutils/binutils-2.19.1.tar.gz}
The GNU binutils support TI COFF v0, v1 and v2 binary files for both TMS320C3X and TMS320C4X targets.

To compile the binutils and install them into \texttt{/opt/c4x-coff}:

\begin{verbatim}
$ ./configure --target=c4x-unknown-coff --prefix=/opt/c4x-coff
$ make
$ make install
\end{verbatim}

A key feature we're interested on is the ability of \texttt{objdump} to dump/disassemble a TI COFF binary for the TMS320C3X.
For instance, the following command will dump file \texttt{test.out} into file \texttt{dump.txt}:

\begin{verbatim}
$ /opt/c4x-coff/bin/c4x-unknown-coff-objdump -D test.out > dump.txt
\end{verbatim}

\subsection{Simulator configuration}
\label{tms320c3x_configuration}

\noindent The simulator stores its configuration (a set of parameters) in a XML configuration file. 
\newline\\
\noindent The simulator can provide the user with a default XML configuration file with option \texttt{-g}:

\begin{verbatim}
$ tms320c3x -g default_sim_config.xml
\end{verbatim}

\noindent The simulator can loads a XML configuration file with option \texttt{-c}:

\begin{verbatim}
$ tms320c3x -c sim_config.xml
\end{verbatim}

\noindent \textit{Note: Although it's not strictly necessary, Parameter \texttt{inline-debugger.memory-atom-size} should be set to value 4 as the TMS320C3X memory is not byte-addressable. If this parameter is not set to 4, presentation of the memory content and disassembly may seem unconventional in the inline debugger.}

\noindent The available parameters are summarized in table below:

\begin{center}
	\tablehead{\hline}
	\tabletail{\hline}
	\begin{supertabular}{|p{7.5cm}|p{7.5cm}|}
	\hline
	\multicolumn{2}{|c|}{\textbf{\large CPU run-time parameters}}\\
	\hline
	\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{cpu.max-inst}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{64-bit unsigned integer}}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{$2^{64} - 1$}}\\
	\multicolumn{2}{|l|}{}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline Maximum number of instructions to execute before stopping simulation.}\\
	\hline
	\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{cpu.trap-on-instruction-counter}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{64-bit unsigned integer}}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{$2^{64} - 1$}}\\
	\multicolumn{2}{|l|}{}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline Number of instructions to execute before leaving control to the debugger.}\\
	\hline
	\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{cpu.verbose-all}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{bool}}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{false}}\\
	\multicolumn{2}{|l|}{}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline Globally enable/disable verbosity of CPU.}\\
	\hline
	\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{cpu.verbose-setup}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{bool}}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{false}}\\
	\multicolumn{2}{|l|}{}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline Enable/disable verbosity of CPU while setup.}\\
	\hline
	\hline
	\multicolumn{2}{|c|}{\textbf{\large Service GDB Server run-time parameters}}\\
	\hline
	\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{gdb-server.tcp-port}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{integer}}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{12345}}\\
	\multicolumn{2}{|l|}{}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline TCP/IP port to listen waiting for a GDB client connection.}\\
	\hline
	\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{gdb-server.architecture-}\newline$\hookrightarrow$\texttt{description-filename}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{string}}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{empty string}}\\
	\multicolumn{2}{|l|}{}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline Filename of an XML description of the connected processor.}\\
	\hline
	\hline
	\multicolumn{2}{|c|}{\textbf{\large Inline Debugger run-time parameters}}\\
	\hline
	\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{inline-debugger.memory-atom-size}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{unsigned integer}}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{1}}\\
	\multicolumn{2}{|l|}{}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline Size of the smallest addressable element in memory.}\\
	\hline
	\multicolumn{2}{|c|}{\textbf{\large Kernel Service Logger run-time parameters}}\\
	\hline
	\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{kernel\_logger.std\_err}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{bool}}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{false}}\\
	\multicolumn{2}{|l|}{}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline If true, show logger output through the standard error output.}\\
	\hline
	\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{kernel\_logger.std\_out}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{bool}}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{false}}\\
	\multicolumn{2}{|l|}{}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline If true, show logger output through the standard output.}\\
	\hline
	\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{kernel\_logger.std\_err\_color}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{bool}}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{false}}\\
	\multicolumn{2}{|l|}{}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline If true, colorize logger output through the standard error output (only works if std\_err is active).}\\
	\hline
	\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{kernel\_logger.std\_out\_color}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{bool}}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{false}}\\
	\multicolumn{2}{|l|}{}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline If true, colorize logger output through the standard output (only works if std\_out is active).}\\
	\hline
	\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{kernel\_logger.file}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{bool}}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{false}}\\
	\multicolumn{2}{|l|}{}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline If true, keep logger output in a file.}\\
	\hline
	\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{kernel\_logger.filename}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{string}}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{empty string}}\\
	\multicolumn{2}{|l|}{}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline Filename to keep logger output (the option \texttt{file} must be activated).}\\
	\hline
	\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{kernel\_logger.xml\_file}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{bool}}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{false}}\\
	\multicolumn{2}{|l|}{}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline If true, keep logger output in a file XML formatted.}\\
	\hline
	\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{kernel\_logger.xml\_filename}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{string}}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{empty string}}\\
	\multicolumn{2}{|l|}{}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline Filename to keep logger XML output (the option \texttt{xml\_file} must be activated).}\\
	\hline
	\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{kernel\_logger.xml\_file\_gzipped}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{bool}}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{false}}\\
	\multicolumn{2}{|l|}{}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline If the \texttt{xml\_file} option is active, the output file will be compressed (a .gz extension will be automatically added to the \texttt{xml\_filename} option.}\\
	\hline
	\multicolumn{2}{|c|}{\textbf{\large Service COFF Loader run-time parameters}}\\
	\hline
	\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{loader.filename}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{string}}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{empty string}}\\
	\multicolumn{2}{|l|}{}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline The COFF file name to load into memory.}\\
	\hline
	\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{loader.dump-headers}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{bool}}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{empty string}}\\
	\multicolumn{2}{|l|}{}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline If true this parameter makes the COFF loader print the file headers on the screen (file header, section headers, symbol table \ldots) while loading the program.}\\
	\hline
	\multicolumn{2}{|c|}{\textbf{\large Memory run-time parameters}}\\
	\hline
	\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{memory.org}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{64-bit unsigned integer}}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{0}}\\
	\multicolumn{2}{|l|}{}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline Starting address of memory (typically 0).}\\
	\hline
	\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{memory.bytesize}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{64-bit unsigned integer}}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{0}}\\
	\multicolumn{2}{|l|}{}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline Size in bytes (8-bit) of memory.}\\
	\hline
	\hline
	\multicolumn{2}{|c|}{\textbf{\large Service TI C I/O run-time parameters}}\\
	\hline
	\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{ti\_c\_io.enable}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{bool}}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{false}}\\
	\multicolumn{2}{|l|}{}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline Enable/Disable TI C I/O support.}\\
	\hline
	\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{ti-c-io.warning-as-error}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{bool}}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{false}}\\
	\multicolumn{2}{|l|}{}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline Whether Warnings are considered as error or not.}\\
	\hline
	\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{ti-c-io.pc-register-name}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{string}}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{"PC"}}\\
	\multicolumn{2}{|l|}{}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline Name of the CPU program counter register.}\\
	\hline
	\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{ti-c-io.c-io-buffer-symbol-name}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{string}}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{"\_\_CIOBUF\_"}}\\
	\multicolumn{2}{|l|}{}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline C I/O buffer symbol name.}\\
	\hline
	\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{ti-c-io.c-io-breakpoint-}\newline$\hookrightarrow$\texttt{symbol-name}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{string}}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{"C\$\$IO\$\$"}}\\
	\multicolumn{2}{|l|}{}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline C I/O breakpoint symbol name.}\\
	\hline
	\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{ti-c-io.c-exit-breakpoint-}\newline$\hookrightarrow$\texttt{symbol-name}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{string}}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{"C\$\$EXIT"}}\\
	\multicolumn{2}{|l|}{}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline C EXIT breakpoint symbol name.}\\
	\hline
	\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{ti-c-io.verbose-all}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{bool}}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{false}}\\
	\multicolumn{2}{|l|}{}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline Globally enable/disable verbosity of TI C I/O service.}\\
	\hline
	\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{ti-c-io.verbose-io}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{bool}}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{false}}\\
	\multicolumn{2}{|l|}{}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline Enable/disable verbosity of TI C I/O service while I/Os.}\\
	\hline
	\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{ti-c-io.verbose-setup}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{bool}}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{false}}\\
	\multicolumn{2}{|l|}{}\\
	\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline Enable/disable verbosity of TI C I/O service while setup.}\\
	\hline
	\end{supertabular}
\end{center}

\subsection{Debugging the target program}
\label{tms320c3x_inline_debug}

Command line option \texttt{-i} enables the inline debugger. The inline debugger has support for controlling the program execution, inspecting the program and its data, and putting breakpoints and watchpoints. The user can interact with the debugger using the following commands:
\begin{itemize}
\item Execution commands:
	\begin{itemize}
	\item \texttt{<c | cont | continue> [<symbol | *address>]}: \newline
	continue to execute instructions until program reaches a breakpoint, a watchpoint, 'symbol' or 'address'
	\item \texttt{<s | si | step | stepi>}: \newline
	execute one instruction
	\item \texttt{<n | ni | next | nexti>}: \newline
	continue to execute instructions until the processor reaches next contiguous instruction, a breakpoint or a watchpoint
	\item \texttt{<r | run>}: \newline
	restart the simulation from the beginning (not yet supported)
	\end{itemize}
\item Inspection commands:
	\begin{itemize}
	\item \texttt{<dis | disasm | disassemble> [<symbol | *address>]}: \newline
	continue to disassemble starting from 'symbol', 'address', or after the previous disassembly
	\item \texttt{<d | dump> [<symbol | *address>]}: \newline
	dump memory starting from 'symbol', 'address', or after the previous dump
	\item \texttt{<register name>}: \newline
	display the register value
	\item \texttt{<m | monitor> [<variable name>]}: \newline
	display the given simulator variable (displays all variable names if none is given)
	\item \texttt{<p | prof | profile>} \newline
	\texttt{<p | prof | profile> program} \newline
	\texttt{<p | prof | profile> data} \newline
	\texttt{<p | prof | profile> data read} \newline
	\texttt{<p | prof | profile> data write}: \newline
	display the program/data profile
	\end{itemize}
\item Breakpoints/Watchpoints commands:
	\begin{itemize}
	\item \texttt{<b | break> [<symbol | *address>]}: \newline
	set a breakpoint at 'symbol' or 'address'. If 'symbol' or 'address' are not specified, display the breakpoint list
	\item \texttt{<w | watch> [<symbol | *address[:<size>]>] [<read | write>]}: \newline
	set a watchpoint at 'symbol' or 'address'. When using 'continue' and 'next' commands, the debugger will spy CPU loads and store. The debugger will return to command line prompt once a load, or a store will access to 'symbol' or 'address'.
	\item \texttt{<del | delete> <symbol | *address>}: \newline
	delete the breakpoint at 'symbol' or 'address'
	\item \texttt{<delw | delwatch> <symbol | *address> [<read | write>] [<size>]}: \newline
	delete the watchpoint at 'symbol' or 'address'
	\end{itemize}
\item Miscellaneous commands:
	\begin{itemize}
	\item \texttt{<h | ? | help>}: \newline
	display the help
	\item \texttt{<quit | q>}: \newline
	quit the built-in debugger
	\end{itemize}
\end{itemize}

\newpage
\section{Developer guide}

The TMS320C3X simulator is the combination of several software components:
\begin{itemize}
\item A service infrastructure in \texttt{unisim/kernel/service} (see ~\ref{tms320c3x_service_infrastructure})
\item A built-in logger in \texttt{unisim/kernel/logger} (see ~\ref{tms320c3x_logger})
\item Several small utility classes in \texttt{unisim/util} (see ~\ref{tms320c3x_utils})
\item A TMS320C3X instruction set simulator in \texttt{unisim/component/cxx/processor/tms320} (see ~\ref{tms320c3x_iss})
\item A memory in \texttt{unisim/component/cxx/memory/ram} (see ~\ref{tms320c3x_memory})
\item Service interface definitions in \texttt{unisim/service/interfaces} (see ~\ref{tms320c3x_interfaces})
\item A COFF loader service in \texttt{unisim/service/loader/coff\_loader} (see ~\ref{tms320c3x_coff_loader})
\item A TI C I/O service in \texttt{unisim/service/os/ti\_c\_io} (see ~\ref{tms320c3x_ti_c_io})
\item An inline debugger service in \texttt{unisim/service/debug/inline\_debugger} (see ~\ref{tms320c3x_inline_debugger})
\item A GDB server service in \texttt{unisim/service/debug/gdb\_server} (see ~\ref{tms320c3x_gdb_server})
\end{itemize}

\subsection{Simulation Components}

\subsubsection{TMS320C3X instruction set simulator}
\label{tms320c3x_iss}

The instruction set simulator source code is located in directory: \newline \texttt{unisim/component/cxx/processor/tms320}.\newline
The UNISIM TMS320C3X instruction set simulator uses an instruction set simulator generator, GenISSLib.
GenISSLib uses an instruction set description (\texttt{.isa} files) located in sub-directory \texttt{isa} of the instruction set simulator source code directory.
Most computations (e.g. integer computation) are directly performed in these description file.
See the GenISSLib manual for additional informations about the GenISSLib instruction set description language.
The simulator is implemented in class \texttt{unisim::component::cxx::processor::tms320::CPU} which main methods are:
\begin{itemize}
\item \texttt{StepInstruction}: executes one instruction
\item \texttt{PrWrite}: Write a word into memory using service import \texttt{memory\_import} (see ~\ref{tms320c3x_service_infrastructure} for details about services). This methods is virtual so that it can be reimplemented into a derived class.
\item \texttt{PrRead}: Read a word from memory using service import \texttt{memory\_import} (see ~\ref{tms320c3x_service_infrastructure} for details about services). This methods is virtual so that it can be reimplemented into a derived class.
\item \texttt{SetIRQLevel}: Set level (0/1, true/false) of an IRQ. IRQ numbering is same as register \texttt{IF} bit numbering.
\item \texttt{ComputeIndirEA}: Compute the effective address for indirect addressing modes.
\item \texttt{ComputeDirEA}: Compute the effective address for direct addressing modes.
\end{itemize}
This class is a client and a service (see ~\ref{tms320c3x_service_infrastructure} for details) that can be connected to a debugger, a loader, and a memory.

Each register (R0, R1, R2, R3, R4, R5, R6, R7, ar0, ar1, ar2, ar3, ar4, ar5, ar6, ar7, DP, IR0, IR1, BK, SP, ST, IE, IF, IOF, RS, RE, and RC) is implemented by an instance of class \texttt{unisim::component::cxx::processor::tms320::Register}.
This class has methods to get/set value of a register and to perform floating point computations.

\noindent The table below summarizes the API of the CPU:

\begin{center}
	\tablehead{\hline}
	\tabletail{\hline}
	\begin{supertabular}{|p{7.5cm}|p{7.5cm}|}
		\hline
		\multicolumn{2}{|l|}{\textbf{\Large Module CPU}}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Class Name:} \newline \texttt{unisim::component::cxx::processor}\newline$\hookrightarrow$\texttt{::tms320::CPU}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Header:} \newline \texttt{unisim/component/cxx/processor}\newline$\hookrightarrow$\texttt{/tms320/cpu.hh}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline This C++ class is TMS320C3X instruction set simulator.}\\
		\hline
		\hline
		\multicolumn{2}{|c|}{\textbf{\large Template Parameters}}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{CONFIG}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{class}}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{none}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline This is a configuration class that is a collection of definitions to parameterize the simulation model.}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{DEBUG}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{bool}}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{false}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline Enable/Disable debug.}\\
		\hline
		\hline
		\multicolumn{2}{|c|}{\textbf{\large Run-Time Parameters}}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{max-inst}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{uint64\_t}}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{$2^{64} - 1$}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline Maximum number of instructions to simulate. Once this threshold is reached, the CPU calls virtual method \texttt{Stop} to stop simulation.}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{trap-on-instruction-counter}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{uint64\_t}}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{$2^{64} - 1$}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline Number of instructions to simulate before trapping, i.e. calling \texttt{ReportTrap} through service import \texttt{trap\_import}. This is useful to inform debugger that CPU has simulated a certain amount of instructions, so that user can take control of the simulation at this point.}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{verbose-setup}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{bool}}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{false}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline Enable/disable verbosity of CPU while setup.}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{verbose-all}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{bool}}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{false}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline Globally enable/disable verbosity of CPU.}\\
		\hline
		\hline
		\multicolumn{2}{|c|}{\textbf{\large Service Exports}}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{disassembly\_export}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Interface:} \newline \texttt{unisim::service::interfaces} \newline$\hookrightarrow$\texttt{::Disassembly}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline The CPU provides clients (e.g. debuggers) with a disassembly capability through this service export.}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{registers\_export}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Interface:} \newline \texttt{unisim::services::interfaces} \newline$\hookrightarrow$\texttt{::Registers}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline The CPU provides clients (e.g. debuggers) with an access to its registers through this service export.}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{memory\_export}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Interface:} \newline \texttt{unisim::service::interfaces} \newline$\hookrightarrow$\texttt{::Memory}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline The CPU provides clients (e.g debuggers) with an access to memory space through this service export. Accesses to memory space are non-intrusive, i.e. they do not affect timing or data placement (e.g. in caches or TLBs).}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{memory\_injection\_export}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Interface:} \newline \texttt{unisim::service::interfaces} \newline$\hookrightarrow$\texttt{::MemoryInjection}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline The CPU provides clients (e.g debuggers) with an access to memory space through this service export. Accesses to memory space are intrusive, i.e. they affect timing or data placement (e.g. in caches or TLBs).}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{memory\_access\_reporting\_control}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Interface:} \newline \texttt{unisim::service::interfaces} \newline$\hookrightarrow$\texttt{::MemoryAccessReportingControl}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline The CPU allows a client to enable/disable memory access reporting through this service export.}\\
		\hline
		\hline
		\multicolumn{2}{|c|}{\textbf{\large Service Imports}}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{debug\_control\_import} \newline \textbf{Mandatory connected:} no} & \multicolumn{1}{p{7.5cm}|}{\textbf{Interface:} \newline \texttt{unisim::service::interfaces} \newline$\hookrightarrow$\texttt{::DebugControl}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline This service import allow to interactively control the CPU. Method \texttt{FetchDebugCommand} of the service import interface returns command for CPU: either execute one instruction or stop simulation.}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{memory\_access\_reporting\_import} \newline \textbf{Mandatory connected:} no} & \multicolumn{1}{p{7.5cm}|}{\textbf{Interface:} \newline \texttt{unisim::service::interfaces} \newline$\hookrightarrow$\texttt{::MemoryAccessReporting}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline The CPU reports memory accesses (e.g. to a debugger) using this service import.}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{trap\_reporting} \newline \textbf{Mandatory connected:} no} & \multicolumn{1}{p{7.5cm}|}{\textbf{Interface:} \newline \texttt{unisim::service::interfaces} \newline$\hookrightarrow$\texttt{::TrapReporting}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline The CPU informs a remote service (e.g. a debugger) that an event has occurred using this service import.}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{symbol\_table\_lookup\_import} \newline \textbf{Mandatory connected:} no} & \multicolumn{1}{p{7.5cm}|}{\textbf{Interface:} \newline \texttt{unisim::service::interfaces} \newline$\hookrightarrow$\texttt{::SymbolTableLookup}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline The CPU can obtain a translation from an address to a symbol name using this service import.}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{memory\_import} \newline \textbf{Mandatory connected:} no} & \multicolumn{1}{p{7.5cm}|}{\textbf{Interface:} \newline \texttt{unisim::service::interfaces} \newline$\hookrightarrow$\texttt{::Memory}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline The CPU accesses to an external memory using this service import.}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{ti\_c\_io\_import} \newline \textbf{Mandatory connected:} yes} & \multicolumn{1}{p{7.5cm}|}{\textbf{Interface:} \newline \texttt{unisim::service::interfaces} \newline$\hookrightarrow$\texttt{::TI\_C\_IO}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline The CPU allow a remote service (e.g. TI C I/O service) to capture \texttt{SWI} instructions. Such service should translate target program I/Os to host I/Os.}\\
		\hline
	\end{supertabular}
\end{center}

\newpage
\subsubsection{Memory}
\label{tms320c3x_memory}

The source of class \texttt{unisim::component::cxx::memory::ram::Memory} is in directory: \newline
\texttt{unisim/component/cxx/memory/ram}.\newline
Methods \texttt{ReadMemory} and \texttt{WriteMemory} respectively implement read and write memory accesses.
This simulation components provides interface \texttt{unisim::service::interfaces::Memory} to other simulation components (e.g. CPU) or services (e.g. the COFF loader).

\noindent The table below summarizes the API of the memory:

\begin{center}
	\tablehead{\hline}
	\tabletail{\hline}
	\begin{supertabular}{|p{7.5cm}|p{7.5cm}|}
		\hline
		\multicolumn{2}{|l|}{\textbf{\Large Module Memory}}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Class Name:} \newline \texttt{unisim::component::cxx::memory}\newline$\hookrightarrow$\texttt{::ram::Memory}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Header:} \newline \texttt{unisim/component/cxx/memory}\newline$\hookrightarrow$\texttt{/ram/memory.hh}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline This C++ class models a RAM.}\\
		\hline
		\hline
		\multicolumn{2}{|c|}{\textbf{\large Template Parameters}}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{PHYSICAL\_ADDR}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{class}}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{none}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline This is the C++ type of a memory address (typically uint32\_t or uint64\_t).}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{PAGE\_SIZE}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{uint32\_t}}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{1 MB}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline This is the size of a memory page in the implementation. This parameter is absolutely not related to an architectural parameter but only a hint to speed-up simulation (memory usage vs. speed).}\\
		\hline
		\hline
		\multicolumn{2}{|c|}{\textbf{\large Run-Time Parameters}}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{org}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{PHYSICAL\_ADDR}}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{0}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline Starting address of the memory (typically 0).}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{bytesize}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{PHYSICAL\_ADDR}}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{0}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline Size in bytes of the memory.}\\
		\hline
		\hline
		\multicolumn{2}{|c|}{\textbf{\large Service Exports}}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{memory\_export}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Interface:} \newline \texttt{unisim::service::interfaces} \newline$\hookrightarrow$\texttt{::Memory}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline The memory provides clients (e.g debuggers, loaders or CPUs) with an access to memory space through this service export. Accesses to memory space are non-intrusive, i.e. they do not affect timing or data placement.}\\
		\hline
	\end{supertabular}
\end{center}

\subsection{Service infrastructure}
\label{tms320c3x_service_infrastructure}

Designing a new emulator, and particularly for a research purpose, means implementing an instruction set emulator but also involves several software components not directly related to pure instruction set execution.
The most obvious needed software components are memories, debuggers, loaders, but components such as chipsets and peripherals are still mandatory to enable running real unmodified applications.
Abstracting the underlying host hardware is also something useful to emulators.
Making all these components running together requires programming interfaces as much standard as possible.

Usually the programmer faces to the problems of sharing source codes among several emulators, reusing existing source codes, and building a fully functional emulator from all these heterogeneous pieces of source codes.
Most of the time, the software components are strongly dependent for each other: components are statically linked together through explicit function calls and adhoc interfaces.
Replacing these adhoc interfaces with C++ pure interfaces (C++ classes with only unimplemented virtual methods, see your C++ manual for more details) and linking the components through pointers is a step toward avoiding such strong dependencies between the components. But still finding a standard manner to initialize those pointers is necessary. This can be done either by directly writing in those pointers or calling special functions to do the job.

Another problem with heterogeneous software components is the manner to instantiate and parameterize those components in a standard way, so that it is easier for the component's user to use a new component.
Usually, parameterizing a component means passing arguments to an initialization function or a class constructor. It implies that the programmers agree on using only one of these two solutions or both.
Still the programmers must know the setup order of these components: it is an error prone process because determining a correct order from the components documentation will likely fail the first times.

In this section, we present the standard way to share, reuse, link, parameterize and setup the software components within the TMS320C3X simulator.
C++ object oriented programming and pure C++ interfaces enable sharing and reuse.
In few words, some special pointers (classes \texttt{ServiceImport} and \texttt{ServiceExport}) linking the software components (classes \texttt{Service} and \texttt{Client}) together with some base software component classes have been introduced, thus enabling easier component composition and connection.
The parameterization have been standardized (class \texttt{Parameter}) and the framework (class \texttt{ServiceManager}) uses additional dependency informations to provide the user with an automatic setup order.

\subsubsection{Class hierarchy}

Each software component of the UNISIM TMS320C3X simulator is an object (a client and/or a service). The term \texttt{Client} refers to an object that calls methods of a \texttt{Service} through a \texttt{ServiceImport}. The term \texttt{Service} refers to an object that exposes its interface to client through a \texttt{ServiceExport}. \texttt{ServiceImport} acts as gate for a client to call remote methods of a service. \texttt{ServiceExport} is a mean for a service to export its interface, so that a client \texttt{ServiceImport} can be bound to it.

Figure~\ref{fig:tms320c3x_object_hierarchy} presents the object/class hierarchy of the service infrastructure. This class hierarchy allows the \texttt{ServiceManager} to see clients and services as a service graph. The base class of the class hierarchy is \texttt{class Object}. It provides composition (it's a container) and naming of objects. Template class \texttt{Service<SERVICE\_IF>} represents a service implementing interface \texttt{SERVICE\_IF} while template class \texttt{Client<SERVICE\_IF>} represents a client using a service implementing interface \texttt{SERVICE\_IF}. On figure~\ref{fig:tms320c3x_object_hierarchy}, classes \texttt{MyService} and \texttt{MyClient} are respectively examples of a service and a client with interface \texttt{SERVICE\_IF}. Example class \texttt{MyService} has a member of type \texttt{ServiceExport<SERVICE\_IF>} to export \texttt{SERVICE\_IF} to the outside world. Example class \texttt{MyClient} has a member of type \texttt{ServiceImport<SERVICE\_IF>} to import interface \texttt{SERVICE\_IF} from a remote service.

Classes \texttt{ServiceImport<SERVICE\_IF>} and \texttt{ServiceExport<SERVICE\_IF>} provides a C++ operator \texttt{>>} to allow binding a service import to a service export, so that client is bound to a service. In the example of Figure~\ref{fig:tms320c3x_object_hierarchy}, class \texttt{MyClient} would use service \texttt{MyService} as soon as \texttt{ServiceImport} of class \texttt{MyClient} is bound to \texttt{ServiceExport} of class \texttt{MyService}.
A Concrete use of service binding import and service is provided in the next section.

\begin{figure}[!h]
	\begin{center}
		\includegraphics[width=\textwidth]{tms320c3x/fig_object_hierarchy.pdf}
	\end{center}
	\caption{Service/Client/Run-time Parameters Object hierarchy.}
	\label{fig:tms320c3x_object_hierarchy}
\end{figure}

\subsubsection{Building a service graph}
\label{tms320c3x_building_a_service_graph}

Using services implies building a service graph.
For instance, consider that the client is a loader, and the service is a memory.
The programmer creates objects \texttt{loader} and \texttt{memory}, see Figure~\ref{fig:tms320c3x_service_instanciation}.

\begin{figure}[h]
  \begin{center}
    \input{tms320c3x/service_instanciation}
    \caption{\label{fig:tms320c3x_service_instanciation} Client/Service instantiation.}
  \end{center}
\end{figure}

Object \texttt{loader} is a client because it needs a service (reading/writing in memory) from object \texttt{memory} to load the program.
\texttt{loader} has a member \texttt{import} named \texttt{memory\_import} whereas \texttt{memory} object has a member \texttt{export} named \texttt{memory\_export}.
The programmer connects the loader to the memory using \texttt{loader.memory\_import} and \texttt{memory.memory\_export}, see Figure~\ref{fig:tms320c3x_service_connection}.

\begin{figure}[h]
  \begin{center}
    \input{tms320c3x/service_connection}
    \caption{\label{fig:tms320c3x_service_connection} Import/Export connection.}
  \end{center}
\end{figure}

Once \hfill the \hfill programmer \hfill has \hfill created \hfill a \hfill service \hfill graph, \hfill he \hfill must \hfill perform \hfill a \hfill call \hfill to \hfill \texttt{ServiceManager::Setup()}.
\texttt{ServiceManager::Setup()} returns \texttt{true} if setup of each service and client in the graph has been successful, other it returns \texttt{false}.

\subsubsection{Designing a service}

A service is a C++ object inheriting from template class \texttt{Service<SERVICE\_INTERFACE>} \ding{202}, see Figure~\ref{fig:tms320c3x_simple_service}.
\texttt{SERVICE\_INTERFACE} is a C++ abstract class defining the virtual methods implemented by the service.
To export its interface, a service must have a member of type \texttt{ServiceExport<SERVICE\_INTERFACE>} \ding{203}.
For normalization purposes, the service constructor should take only two parameters \ding{204}: the service name and the pointer to the parent (a container service).
The pointer to the parent is \texttt{null} if the service is a top level service (no parent).
The base \texttt{Object} constructor \ding{205} and the base \texttt{Service} constructor \ding{206} must be called with the name and the pointer to the parent.
\texttt{ServiceExport} member constructor must be called with the export name and a pointer to the owner, i.e. the service itself \ding{207}.

\begin{figure}[h]
  \begin{center}
    \input{tms320c3x/simple_service}
    \caption{\label{fig:tms320c3x_simple_service} Simple service.}
  \end{center}
\end{figure}

\subsubsection{Designing a client}

A client is a C++ object inheriting from template class \texttt{Client<SERVICE\_INTERFACE>} \ding{202}, see Figure~\ref{fig:tms320c3x_simple_client}.
\texttt{SERVICE\_INTERFACE} is a C++ abstract class defining the virtual methods implemented by the service the client can call.
To import an interface, a client must have a member of type \texttt{ServiceImport<SERVICE\_INTERFACE>} \ding{203}.
For normalization purposes, the client constructor should take only two parameters \ding{204}: the client name and the pointer to the parent (a container client).
The pointer to the parent is \texttt{null} if the client is a top level client (no parent).
The base \texttt{Object} constructor \ding{205} and the base \texttt{Client} constructor \ding{206} must be called with the name and the pointer to the parent.
\texttt{ServiceImport} member constructor must be called with the import name and a pointer to the owner, i.e. the client itself \ding{207}.


\begin{figure}[h]
  \begin{center}
    \input{tms320c3x/simple_client}
    \caption{\label{fig:tms320c3x_simple_client} Simple client.}
  \end{center}
\end{figure}

\subsubsection{Run-time parameters}

Run-time parameterization can be added to a service or a client. "Run-time parameterization" means that the service and/or client can be reconfigured at run-time. It is opposed to "Static parameterization or template parameterization" which allows configuring a service and/or client at compilation-time.
To expose a member variable as a run-time parameter, a client/service must have member variable of type \texttt{Parameter<TYPE>}, where \texttt{TYPE} is the C++ type of the exposed member variable, see Figure~\ref{fig:tms320c3x_run_time_parameter}. Consider that a service would expose a member variable \texttt{x} \ding{202}. An instance of class \texttt{Parameter} is defined as a member of the service \ding{203}. 
The parameter is bound to the exposed variable \ding{204} in the service/client constructor.

\begin{figure}[h]
  \begin{center}
    \input{tms320c3x/run_time_parameter}
    \caption{\label{fig:tms320c3x_run_time_parameter} Exposing a service/client member variable as a run-time parameter.}
  \end{center}
\end{figure}

\subsubsection{Setup Order}

As explained in section~\ref{tms320c3x_building_a_service_graph}, Method \texttt{Setup} of class \texttt{ServiceManager} calls all \texttt{Setup} methods in the simulator. A problem may occur if setup order is important. For instance, consider two services: service \texttt{A} and \texttt{B}. \texttt{A::Setup()} uses service \texttt{B}. A correct setup order consist to first setup service \texttt{B} and then service \texttt{A}.
To solve such setup dependency, programmer should call method \texttt{Object::SetupDependsOn} (e.g. in the class constructor) so that the service manager can ensure correct setup order.
If the service manager finds a cyclic dependency, \texttt{ServiceManager::Setup()} fails: it generally means that clients and services have been badly designed.

\newpage
\subsection{Service Interfaces}
\label{tms320c3x_interfaces}

All service interfaces are declared in namespace \texttt{unisim::service::interfaces} and located in directory \texttt{unisim/service/interfaces}.

\subsubsection{Memory Interfaces}

These interfaces allows reading and writing to memory space. The memory interfaces comes in two flavors:
\begin{itemize}
\item non-intrusive memory access (\texttt{unisim::service::interfaces::Memory}); It should not affect timing and data placement (e.g. in caches and TLBs).
\item intrusive memory access (\texttt{unisim::service::interfaces::MemoryInjection}); It can affect timing and data placement.
\end{itemize}

\noindent The two C++ interfaces are:

\begin{center}
	\input{tms320c3x/memory_interface}
\end{center}

\begin{center}
	\input{tms320c3x/memory_injection_interface}
\end{center}

\noindent The arguments to methods \texttt{ReadMemory}, \texttt{InjectReadMemory}, \texttt{WriteMemory}, \texttt{InjectWriteMemory} are:
\begin{itemize}
\item \texttt{addr}: the starting address of the data transfer between the memory and the buffer
\item \texttt{buffer}: a pointer to the buffer of bytes
\item \texttt{size}: the length in bytes to transfer between the memory and the buffer
\end{itemize}

\subsubsection{Debugging Interfaces}

These interfaces are intended for interfacing simulation components (e.g. CPU, memory, devices, \ldots) with a debugger (e.g. inline-debugger, GDB server, \ldots).

\textbf{Instruction disassembly}. A CPU components provides a debugger with a disassembly capability of the instruction set using interface \texttt{unisim::service::interfaces::Disassembly}.

\begin{center}
	\input{tms320c3x/disassembly_interface}
\end{center}

\noindent Method \texttt{Disasm} arguments are:
\begin{itemize}
\item \texttt{addr}: the byte address of the instruction to disassemble
\item \texttt{next\_addr}: the byte address of the next instruction
\end{itemize}
\noindent and returns a string with the disassembly of the instruction.

\textbf{Register access}. A CPU or a device provides a debugger with an access to its registers using interface \texttt{unisim::service::interfaces::Registers}.

\begin{center}
	\input{tms320c3x/registers_interface}
\end{center}

\noindent Method \texttt{GetRegister} arguments are:
\begin{itemize}
\item \texttt{name}: the name of the register to retrieve interface
\end{itemize}
\noindent and returns a pointer to an interface \texttt{unisim::util::debug::Register}.

\begin{center}
	\input{tms320c3x/register_interface}
\end{center}

\noindent Method \texttt{GetName} returns the register name.
\noindent Method \texttt{GetValue} fills in a buffer with the register value.
\noindent Method \texttt{SetValue} sets the register value from a buffer.
\noindent Method \texttt{GetSize} returns the register size in bytes.

\textbf{Step by step execution}. A simulation component (e.g. a CPU) leaves control to a debugger with interface \texttt{unisim::service::interfaces::DebugControl}.

\begin{center}
	\input{tms320c3x/debug_control_interface}
\end{center}

Method \texttt{FetchDebugCommand} takes the current program counter as arguments and returns a command for the simulation component: either finish the simulation or execute one instruction.

\textbf{Monitoring memory accesses}. An instrumented simulation component provides a memory access trace using interface \texttt{unisim::service::interfaces::MemoryAccessReporting}.
Such memory trace is useful for a debugger to monitor memory access.

\begin{center}
	\input{tms320c3x/memory_access_reporting_interface}
\end{center}

Method \texttt{ReportMemoryAccess} takes as argument the memory access type (either read or write), the memory type (either data or instruction memory), the address of the access, and the size of the memory access.
Method \texttt{ReportFinishedInstruction} takes as argument the address of next instruction to be executed.

\textbf{Trap reporting}. An instrumented simulation component informs a debugger about an important event using interface \texttt{unisim::service::interfaces::TrapReporting}.
Such event is useful for a debugger to pause simulation once such event occurs.

\begin{center}
	\input{tms320c3x/trap_reporting_interface}
\end{center}

Method \texttt{ReportTrap} takes no arguments.

\textbf{Symbol}. A service (e.g. a loader) provides lookup to the symbol table using interface \texttt{unisim::service::interfaces::SymbolTableLookup}.
This interface is useful for translating addresses to symbol names, and vice-versa.

\begin{center}
	\input{tms320c3x/symbol_table_lookup_interface}
\end{center}

\textbf{Efficient instrumentation.} To limit the impact on simulation performance of memory access instrumentation in the simulation components, such instrumentation can be enable or disable at run-time using interface \texttt{unisim::service::interfaces::MemoryAccessReportingControl}.

\begin{center}
	\input{tms320c3x/memory_access_reporting_control_interface}
\end{center}

\subsubsection{Loader Interface}

This interface provides basic informations about the loaded program.

\begin{center}
	\input{tms320c3x/loader_interface}
\end{center}

\subsubsection{Time Interface}

This interface provides reading of the current time.

\begin{center}
	\input{tms320c3x/time_interface}
\end{center}

\subsubsection{TI C I/O Interface}

An instrumented TMS320C3X instruction set simulator provides a trace of \texttt{SWI} instructions using interface \texttt{unisim::service::interfaces::ti\_c\_io}.
This interface is useful for the TI C I/O service to capture target program I/Os and translate them to host I/Os.

\begin{center}
	\input{tms320c3x/ti_c_io_interface}
\end{center}

\newpage
\subsection{Services}
\subsubsection{COFF loader service}
\label{tms320c3x_coff_loader}

This service provides UNISIM TMS320C3X simulator with a support for TI COFF v0, v1, and v2 binary files  either with little-endian or big-endian headers (see TMS320C3x/C4x Assembly Language Tools User’s Guide, Appendix A). The COFF loader service loads the programs into memory while setup (simulator initialization). The loader can interpret \texttt{.cinit} section if option \texttt{-cr} of TI C cross-compiler has been used while building the target program (see TMS320C3x/C4x Optimizing C Compiler User’s Guide, section 4.8.1: Autoinitialization of variables and constants).
To configure the COFF loader service see section~\ref{tms320c3x_configuration}.
The source code of COFF loader service is located in directory \texttt{unisim/service/loader/coff\_loader}.
\noindent Table below summarizes the COFF Loader service API:

\begin{center}
	\tablehead{\hline}
	\tabletail{\hline}
	\begin{supertabular}{|p{7.5cm}|p{7.5cm}|}
		\hline
		\multicolumn{2}{|l|}{\textbf{\Large Service COFF Loader}}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Class Name:} \newline \texttt{unisim::service::loader::coff\_loader}\newline$\hookrightarrow$\texttt{::CoffLoader}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Header:} \newline \texttt{unisim/service/loader/coff\_loader}\newline$\hookrightarrow$\texttt{/coff\_loader.hh}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline The COFF loader service allows to load a COFF binary program into a memory and fill a symbol table. The loader also provides information about the loaded ﬁle such as the code and data locations (base address and size). The COFF loader loads the program during setup.}\\
		\hline
		\hline
		\multicolumn{2}{|c|}{\textbf{\large Template Parameters}}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{MEMORY\_ADDR}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{class}}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{none}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline This is the C++ type of a memory address (e.g. \texttt{uint32\_t} or \texttt{uint64\_t}).}\\
		\hline
		\hline
		\multicolumn{2}{|c|}{\textbf{\large Run-Time Parameters}}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{filename}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{string}}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} empty string}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline The COFF file name to load into the connected memory.}\\
		\hline
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{dump-headers}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{boolean}}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} false}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline If true this parameter makes the COFF loader print the file headers on the screen (file header, section headers, symbol table \ldots) while loading the program.}\\
		\hline
		\multicolumn{2}{|c|}{\textbf{\large Service Exports}}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{logger\_export}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Interface:} \newline \texttt{unisim::service::interfaces::} \newline$\hookrightarrow$\texttt{Loader<MEMORY\_ADDR>}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline The COFF loader provides information about the code and data location through this export.}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{symbol\_table\_lookup\_export}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Interface:} \newline \texttt{unisim::service::interfaces::} \newline$\hookrightarrow$\texttt{SymbolTableLookup<MEMORY\_ADDR>}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline The COFF loader provides symbol lookup through this export.}\\
		\hline
		\hline
		\multicolumn{2}{|c|}{\textbf{\large Service Imports}}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{memory\_import} \newline \textbf{Mandatory connected:} no} & \multicolumn{1}{p{7.5cm}|}{\textbf{Interface:} \newline \texttt{unisim::service::interfaces::} \newline$\hookrightarrow$\texttt{Memory<uint32\_t>}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline The COFF loader accesses to the memory through this import.}\\
		\hline
	\end{supertabular}
\end{center}

\newpage
\subsubsection{TI C I/O service}
\label{tms320c3x_ti_c_io}

This service provides target programs with a support for low level I/O (open, read, write, close, \ldots) on the host machine.
The TI Run-time support libraries (\texttt{RTS*.lib}) implements a software stack for standard C I/Os (see TMS320C3x/C4x Optimizing C Compiler User’s Guide (SPRU034H, June 1998), Appendix B).
A development board debugger captures target program I/Os at \texttt{C\$\$IO\$\$}. The Run-time support library puts the I/Os in a communication buffer (\texttt{\_\_CIOBUF\_}) that the development board debugger translates to host I/Os. The debugger also captures target program termination at \texttt{C\$\$EXIT}.
The UNISIM TI C I/O service captures and translates target program I/Os and termination in same manner as a development board built-in debugger.
To configure the TI C I/O service see section~\ref{tms320c3x_configuration}.
The source code of COFF loader service is located in directory \texttt{unisim/service/os/ti\_c\_io}.
\noindent Table below summarizes the TI C I/O service API:

\begin{center}
	\tablehead{\hline}
	\tabletail{\hline}
	\begin{supertabular}{|p{7.5cm}|p{7.5cm}|}
		\hline
		\multicolumn{2}{|l|}{\textbf{\Large Service TI C I/O}}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Class Name:} \newline \texttt{unisim::service::os::ti\_c\_io}\newline$\hookrightarrow$\texttt{::TI\_C\_IO}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Header:} \newline \texttt{unisim/service/os/ti\_c\_io}\newline$\hookrightarrow$\texttt{/ti\_c\_io.hh}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline The TI C I/O service provides target programs with a support for low level I/O (open, read, write, close, \ldots) on the host machine.}\\
		\hline
		\hline
		\multicolumn{2}{|c|}{\textbf{\large Template Parameters}}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{MEMORY\_ADDR}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{class}}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{none}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline This is the C++ type of a memory address (e.g. uint32\_t or uint64\_t).}\\
		\hline
		\hline
		\multicolumn{2}{|c|}{\textbf{\large Run-Time Parameters}}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{ti\_c\_io.enable}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{bool}}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{false}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline Enable/Disable TI C I/O support.}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{ti-c-io.warning-as-error}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{bool}}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{false}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline Whether Warnings are considered as error or not.}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{ti-c-io.pc-register-name}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{string}}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{"PC"}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline Name of the CPU program counter register.}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{ti-c-io.c-io-buffer-symbol-name}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{string}}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{"\_\_CIOBUF\_"}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline C I/O buffer symbol name.}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{ti-c-io.c-io-breakpoint-}\newline$\hookrightarrow$\texttt{symbol-name}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{string}}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{"C\$\$IO\$\$"}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline C I/O breakpoint symbol name. The TI C I/O service installs an \texttt{SWI} instruction at this point to capture target program I/O.}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{ti-c-io.c-exit-breakpoint-}\newline$\hookrightarrow$\texttt{symbol-name}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{string}}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{"C\$\$EXIT"}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline C EXIT breakpoint symbol name. The TI C I/O service installs an \texttt{SWI} instruction at this point to capture target program exit.}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{ti-c-io.verbose-all}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{bool}}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{false}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline Globally enable/disable verbosity of TI C I/O service.}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{ti-c-io.verbose-io}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{bool}}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{false}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline Enable/disable verbosity of TI C I/O service while I/Os.}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{ti-c-io.verbose-setup}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{bool}}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{false}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline Enable/disable verbosity of TI C I/O service while setup.}\\
		\hline
		\hline
		\multicolumn{2}{|c|}{\textbf{\large Service Exports}}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{ti\_c\_io\_export}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Interface:} \newline \texttt{unisim::interfaces::} \newline$\hookrightarrow$\texttt{TI\_C\_IO<MEMORY\_ADDR>}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline The TI C I/O provides target to host I/O translation through this service export.}\\
		\hline
		\hline
		\multicolumn{2}{|c|}{\textbf{\large Service Imports}}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{memory\_import}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Interface:} \newline \texttt{unisim::service::interfaces::} \newline$\hookrightarrow$\texttt{Memory<MEMORY\_ADDR>}}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Mandatory connected:} no}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline The TI C I/O service accesses to the memory while setup through this import. While setup it installs a two \texttt{SWI} instructions to capture both target I/O and program exit.}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{memory\_injection\_import}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Interface:} \newline \texttt{unisim::service::interfaces::} \newline$\hookrightarrow$\texttt{MemoryInjection<MEMORY\_ADDR>}}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Mandatory connected:} no}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline The TI C I/O service accesses to the memory while simulation through this import. It accesses to the I/O buffer in the target program memory and then interprete the content of this buffer to translate target program I/Os to host I/Os.}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{registers\_import} \newline \textbf{Mandatory connected:} yes} & \multicolumn{1}{p{7.5cm}|}{\textbf{Interface:} \newline \texttt{unisim::service::interfaces} \newline$\hookrightarrow$\texttt{::Registers}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline This service import should be connected to a CPU module. The TI C I/O service calls method \texttt{GetRegister} through this service import to get an interface to the CPU registers. The TI C I/O service uses methods \texttt{GetName}, \texttt{GetValue}, \texttt{GetSize} and \texttt{SetValue} of that interface to access to CPU registers. This import is mainly used to get the current PC, so that the TI C I/O service can distinguish target program I/Os from target program exit.}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{symbol\_table\_lookup\_import} \newline \textbf{Mandatory connected:} yes} & \multicolumn{1}{p{7.5cm}|}{\textbf{Interface:} \newline \texttt{unisim::service::interfaces} \newline$\hookrightarrow$\texttt{::SymbolTableLookup<MEMORY\_ADDR>}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline The TI C I/O service uses this service import get the address of the breakpoints and I/O buffer from their symbol name.}\\
		\hline
	\end{supertabular}
\end{center}

\newpage
\subsubsection{Inline debugger}
\label{tms320c3x_inline_debugger}

The inline debugger service is a built-in debugger with a text-based user interface, see~\ref{tms320c3x_inline_debug}. It provides instruction level debugging of the target program.
\noindent Table below summarizes the inline debugger service API:

\begin{center}
	\tablehead{\hline}
	\tabletail{\hline}
	\begin{supertabular}{|p{7.5cm}|p{7.5cm}|}
		\hline
		\multicolumn{2}{|l|}{\textbf{\Large Service Inline Debugger}}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Class Name:} \newline \texttt{unisim::service::debug}\newline$\hookrightarrow$\texttt{::inline\_debugger::InlineDebugger}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Header:} \newline \texttt{unisim/service/debug}\newline$\hookrightarrow$\texttt{/inline\_debugger/inline\_debugger.hh}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline The inline debugger service provides the user with a simple text-based interface to interactively debug a target application running on a CPU module. The debug is at the instruction level. The inline debugger may be connected to a CPU module.}\\
		\hline
		\hline
		\multicolumn{2}{|c|}{\textbf{\large Template Parameters}}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{ADDRESS}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{class}}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} none}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline This is the C++ type of a memory address (e.g. uint32\_t or uint64\_t).}\\
		\hline
		\hline
		\multicolumn{2}{|c|}{\textbf{\large Run-time parameters}}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{inline-debugger.memory-atom-size}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{unsigned integer}}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{1}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline Size of the smallest addressable element in memory.}\\
		\hline
		\hline
		\multicolumn{2}{|c|}{\textbf{\large Service Exports}}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{debug\_control\_export}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Interface:} \newline \texttt{unisim::service::interfaces} \newline$\hookrightarrow$\texttt{::DebugControl<ADDRESS>}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline This service export should be connected to a CPU module. The CPU module calls method \texttt{FetchDebugCommand} through its service import to leave control to the debugger and fetch a new debug command.}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{memory\_access\_reporting\_export}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Interface:} \newline \texttt{unisim::service::interfaces} \newline$\hookrightarrow$\texttt{MemoryAccessReporting<ADDRESS>}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline This service export should be connected to a CPU module. The CPU module calls methods \texttt{ReportMemoryAccess} and \texttt{ReportFinishedInstruction} through its service import. This allows the debugger to spy memory accesses and thus handle breakpoints and watchpoints.}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{trap\_reporting\_export}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Interface:} \newline \texttt{unisim::service::interfaces} \newline$\hookrightarrow$\texttt{::TrapReporting}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline This service export should be connected to a CPU module. A CPU module calls method \texttt{ReportTrap} through its service import. This allows the debugger to break execution on the simulated CPU once a trap condition is detected by the CPU module.}\\
		\hline
		\hline
		\multicolumn{2}{|c|}{\textbf{\large Service Imports}}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{disasm\_import} \newline \textbf{Mandatory connected:} yes} & \multicolumn{1}{p{7.5cm}|}{\textbf{Interface:} \newline \texttt{unisim::service::interfaces} \newline$\hookrightarrow$\texttt{::Disassembly<ADDRESS>}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline This service import should be connected to a CPU module. The CPU module should implements method \texttt{Disassemble} which provides the debugger with disassembling of the instructions.}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{memory\_import} \newline \textbf{Mandatory connected:} yes} & \multicolumn{1}{p{7.5cm}|}{\textbf{Interface:} \newline \texttt{unisim::service::interfaces} \newline$\hookrightarrow$\texttt{::Memory<ADDRESS>}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline This service import should be connected to a CPU or a memory module. The debugger uses this service import to access to memory using methods \texttt{ReadMemory} and \texttt{WriteMemory}.}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{memory\_access\_reporting\newline$\hookrightarrow$\_control\_import} \newline \textbf{Mandatory connected:} no} & \multicolumn{1}{p{7.5cm}|}{\textbf{Interface:} \newline \texttt{unisim::service::interfaces} \newline$\hookrightarrow$\texttt{::MemoryAccessReportingControl}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline This service import should be connected to a CPU module. The debugger calls methods \texttt{RequiresMemoryAccessReporting} and \texttt{RequiresFinishedInstructionReporting} through this service import to enable/disable memory access reporting from the CPU module.}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{registers\_import} \newline \textbf{Mandatory connected:} yes} & \multicolumn{1}{p{7.5cm}|}{\textbf{Interface:} \newline \texttt{unisim::service::interfaces} \newline$\hookrightarrow$\texttt{::Registers}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline This service import should be connected to a CPU module. The debugger calls method \texttt{GetRegister} through this service import to get an interface to the CPU registers. The debugger uses methods \texttt{GetName}, \texttt{GetValue}, \texttt{GetSize} and \texttt{SetValue} of that interface to access to CPU registers.}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{symbol\_table\_lookup\_import} \newline \textbf{Mandatory connected:} no} & \multicolumn{1}{p{7.5cm}|}{\textbf{Interface:} \newline \texttt{unisim::service::interfaces} \newline$\hookrightarrow$\texttt{::SymbolTableLookup}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline This service import should be connected to a symbol table. The debugger calls method \texttt{FindSymbol}, \texttt{FindSymbolByAddr}, \texttt{FindSymbolByName} through this service import to translate address to symbol and vice-versa.}\\
		\hline
	\end{supertabular}
\end{center}

\newpage
\subsubsection{GDB server}
\label{tms320c3x_gdb_server}

The GDB server service emulates the GDB remote serial protocol over TCP/IP (see Debugging with GDB, Appendix D. GDB Remote serial protocol), so that a GDB client can connect to the simulator and debug the target program as if it were run on the real hardware.
This service uses an architecture XML description file defined by the \texttt{architecture-description-filename} run-time parameter (see table below).
A sample configuration file for a dummy \texttt{XYZ} big-endian architecture, with four 32-bit general purpose registers named \texttt{r0}, \texttt{r1}, \texttt{r2}, \texttt{r3} and a program counter named \texttt{pc} would be the following:
\begin{verbatim}
<architecture name="XYZ" endian="big">
    <program_counter name="pc"/>
    <register name="r0" size="4"/>
    <register name="r1" size="4"/>
    <register name="r2" size="4"/>
    <register name="r3" size="4"/>
</architecture>
\end{verbatim}

\noindent Table below summarizes the GDB server service API:

\begin{center}
	\tablehead{\hline}
	\tabletail{\hline}
	\begin{supertabular}{|p{7.5cm}|p{7.5cm}|}
		\hline
		\multicolumn{2}{|l|}{\textbf{\Large Service GDB Server}}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Class Name:} \newline \texttt{unisim::service::debug}\newline$\hookrightarrow$\texttt{::gdb\_server::GDBServer}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Header:} \newline \texttt{unisim/service/debug}\newline$\hookrightarrow$\texttt{/gdb\_server/gdb\_server.hh}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline The GDB server service allows debugging a software running on a simulated hardware by connecting (over TCP/IP) a GDB client to it (and thus to the simulator). The GDB client can be either the standard text based client (i.e. command \texttt{gdb}), a graphical front-end to GDB (e.g. \texttt{ddd}), or even Eclipse CDT. The GDB server service directly speaks the GDB serial remote protocol (over TCP/IP), so that a GDB client can connect (over TCP/IP) to the simulator using GDB command \texttt{target remote}. The GDB server service may be connected to a CPU module.}\\
		\hline
		\hline
		\multicolumn{2}{|c|}{\textbf{\large Template Parameters}}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{ADDRESS}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{class}}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} none}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline This is the C++ type of a memory address (e.g. uint32\_t or uint64\_t).}\\
		\hline
		\hline
		\multicolumn{2}{|c|}{\textbf{\large Run-Time Parameters}}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{tcp-port}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{int}}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} \texttt{12345}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline The TCP port used by GDB server service to communicate with the GDB client.}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{architecture-description\newline$\hookrightarrow$-filename}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Type:} \texttt{string}}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Default value:} empty string}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline The path to the architecture description file that the GDB server service must use. The description file provides retargetability to the GDB server service. The following files brings support of the arM, PowerPC and HCS12X processors to the GDB server service: 
		\begin{itemize}
			\item \texttt{unisim/service/debug/gdb\_server/gdb\_armv4l.xml}
			\item \texttt{unisim/service/debug/gdb\_server/gdb\_armv5b.xml}
			\item \texttt{unisim/service/debug/gdb\_server/gdb\_powerpc.xml}
			\item \texttt{unisim/service/debug/gdb\_server/gdb\_hcs12x.xml}
		\end{itemize}
		}\\
		\hline
		\hline
		\multicolumn{2}{|c|}{\textbf{\large Service Exports}}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{debug\_control\_export}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Interface:} \newline \texttt{unisim::service::interfaces} \newline$\hookrightarrow$\texttt{::DebugControl<ADDRESS>}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline This service export should be connected to a CPU module. The CPU module calls method \texttt{FetchDebugCommand} through its service import to leave control to the debugger and fetch a new debug command.}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{memory\_access\_reporting\_export}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Interface:} \newline \texttt{unisim::service::interfaces} \newline$\hookrightarrow$\texttt{MemoryAccessReporting<ADDRESS>}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline This service export should be connected to a CPU module. The CPU module calls methods \texttt{ReportMemoryAccess} and \texttt{ReportFinishedInstruction} through its service import. This allows the debugger to spy memory accesses and thus handle breakpoints and watchpoints.}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{trap\_reporting\_export}} & \multicolumn{1}{p{7.5cm}|}{\textbf{Interface:} \newline \texttt{unisim::service::interfaces} \newline$\hookrightarrow$\texttt{::TrapReporting}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline This service export should be connected to a CPU module. A CPU module calls method \texttt{ReportTrap} through its service import. This allows the debugger to break execution on the simulated CPU once a trap condition is detected by the CPU module.}\\
		\hline
		\hline
		\multicolumn{2}{|c|}{\textbf{\large Service Imports}}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{memory\_import} \newline \textbf{Mandatory connected:} yes} & \multicolumn{1}{p{7.5cm}|}{\textbf{Interface:} \newline \texttt{unisim::service::interfaces} \newline$\hookrightarrow$\texttt{::Memory<ADDRESS>}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline This service import should be connected to a CPU or a memory module. The debugger uses this service import to access to memory using methods \texttt{ReadMemory} and \texttt{WriteMemory}.}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{memory\_access\_reporting\newline$\hookrightarrow$\_control\_import} \newline \textbf{Mandatory connected:} no} & \multicolumn{1}{p{7.5cm}|}{\textbf{Interface:} \newline \texttt{unisim::service::interfaces} \newline$\hookrightarrow$\texttt{::MemoryAccessReportingControl}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline This service import should be connected to a CPU module. The debugger calls methods \texttt{RequiresMemoryAccessReporting} and \texttt{RequiresFinishedInstructionReporting} through this service import to enable/disable memory access reporting from the CPU module.}\\
		\hline
		\multicolumn{1}{|p{7.5cm}}{\textbf{Name:} \texttt{registers\_import} \newline \textbf{Mandatory connected:} yes} & \multicolumn{1}{p{7.5cm}|}{\textbf{Interface:} \newline \texttt{unisim::service::interfaces} \newline$\hookrightarrow$\texttt{::Registers}}\\
		\multicolumn{2}{|l|}{}\\
		\multicolumn{2}{|p{15cm}|}{\textbf{Description:} \newline This service import should be connected to a CPU module. The debugger calls method \texttt{GetRegister} through this service import to get an interface to the CPU registers. The debugger uses methods \texttt{GetName}, \texttt{GetValue}, \texttt{GetSize} and \texttt{SetValue} of that interface to access to CPU registers.}\\
		\hline
	\end{supertabular}
\end{center}

\newpage
\subsubsection{Built-in Logger}
\label{tms320c3x_logger}

UNISIM provides you a centralized log system to debug modules and simulators. It should be used to show all debug messages, instead of using the traditional C++ stream output mechanism (\texttt{cerr} and \texttt{cout}). However, as you will see below the UNISIM log system works much like the C++ stream output mechanism.

It provides the following advantages:
\begin{itemize}
\item Categorization: messages can be categorized on information, warning and error messages
\item Atomic messages: messages will not be mixed (something which happens when programming concurrent/parallel systems like UNISIM/SystemC)
\item Multiple outputs: your messages can be written simultaneously to different outputs, for example:
	\begin{itemize}
	\item console (error output or standard output)
	\item raw file
	\item XML formatted file
	\item ...
	\end{itemize}
\item Simple configuration: the log system configuration is integrated to the UNISIM parameter mechanism provided by UNISIM service, see~\ref{tms320c3x_configuration}.
\end{itemize}

To use the UNISIM logger you need to include “unisim/kernel/logger/logger.hh” and declare that you are using the unisim::kernel::logger namespace:

\begin{center}
	\input{tms320c3x/including_logger}
\end{center}

The logger can only be used by UNISIM Objects, that is, classes that inherit from \newline
\texttt{unisim::kernel::service::Object}. So if you want to use the UNISIM log system your class must inherit from a UNISIM Object.

\begin{center}
	\input{tms320c3x/deriving_from_object}
\end{center}

You will need to create a member variable of the \texttt{unisim::kernel::logger::Logger} type. And at the construction of your object use its default constructor \newline
\texttt{Logger(const unisim::kernel::service::Object \&obj)}. For example:

\begin{center}
	\input{tms320c3x/binding_logger}
\end{center}

Once you have initialized your member logger variable you can start using it in your class methods. Basically it works like an standard C++ output stream, with the \texttt{<<} operator. However, it requires that you indicate when a message starts and ends, and its category (information, warning or error) with the following keywords:
\begin{itemize}
\item \texttt{DebugInfo} and \texttt{EndDebugInfo} to start and end an information message
\item \texttt{DebugWarning} and \texttt{EndDebugWarning} to start and end a warning message
\item \texttt{DebugError} and \texttt{EndDebugError} to start and end an error message
\end{itemize}

You can use the keyword \texttt{EndDebug} instead of \texttt{EndDebugInfo}, \texttt{EndDebugWarning} or \texttt{EndDebugWarning} to indicate that a message ends. The log system will automatically decide which kind of message are you ending. Between the start and the end of a message you can use the logger as a normal C++ output stream. Some of examples of its use:
\begin{center}
	\input{tms320c3x/using_logger}
\end{center}

\newpage
\subsection{Utility classes}
\label{tms320c3x_utils}

The utility classes source code is in \texttt{unisim/util}.

\subsubsection{Arithmetic and Logical helper functions}

These functions located in \texttt{unisim/util/arithmetic} implement fast integer arithmetic computations (assembly on i386 machines):
\begin{itemize}
\item Full Adders (8, 16, 32, and 64 bits)
\item Full Substractors (8, 16, 32, and 64 bits)
\item Full Adders with signed saturation (8, 16, 32, and 64 bits)
\item Full Substractors with signed saturation (8, 16, 32, and 64 bits)
\item Specific Adders (e.g. reversed carry propagation adder)
\item Rotates (left, right, through an additional virtual bit, with bit in, with bit out)
\item Logical Shifts (left, right, through an additional virtual bit, with bit in, with bit out)
\item Arithmetic Shifts (left, right, an additional virtual bit, with, with bit in, with bit out)
\item Bit Scanning (from left to right, and from right to left)
\item Base 2 Logarithm
\item 2's complement sign Extension
\end{itemize}

\subsubsection{Debugging support}

Directory \texttt{unisim/util/debug} provides several C++ classes that supports:
\begin{itemize}
\item Symbol management (symbol table)
\item Profile to keep software activity during a run (e.g. in inline debugger service)
\item Breakpoint/Watchpoint registry
\item Register debugging support
\item Network stub for implementing a fake device, remotely control the simulator, and cosimulate with another external simulation environment
\end{itemize}

\subsubsection{Endianness support}

Directory \texttt{unisim/util/endian} provides support for fast endian conversion (assembly on i386 machines).

\subsubsection{Hash Table}

Directory \texttt{unisim/util/hash\_table} provides support for fast table lookup (e.g. for memory)

\subsubsection{XML}

Directory \texttt{unisim/util/xml} provides support for bare XML file (e.g. for GDB server service)

\newpage
\section{Validation guide}

\subsection{Setup}

\begin{figure}[!h]
	\begin{center}
		\begin{minipage}{\textwidth}
			\begin{minipage}{8.0cm}
				\begin{center}
					\includegraphics[width=7.0cm]{tms320c3x/fig_tms320c3x_board.jpg}
					\caption{\label{fig:tms320c3x_board} TMS320VC33 Board.}
				\end{center}
			\end{minipage}
			\begin{minipage}{8.0cm}
				\begin{center}
					\includegraphics[width=7.0cm]{tms320c3x/fig_tms320c3x_dev_kit.jpg}
					\caption{\label{fig:tms320c3x_jtag_emu} TMS320VC33 board with JTAG.}
				\end{center}
			\end{minipage}
		\end{minipage}
	\end{center}
\end{figure}

The simulator validation involved using the TI C cross-compiler for Windows (see section~\ref{tms320c3x_cross_compiler}) with the following versions:
\begin{itemize}
\item TMS320C3x/4x ANSI C Compiler Version 5.11
\item TMS320C3x/4x ANSI C Optimizer Version 5.13
\item TMS320C3x/4x ANSI C Code Generator Version 5.13
\item TMS320C3x/4x COFF Assembler Version 5.12
\item TMS320C3x/4x COFF Linker Version 5.11
\end{itemize}

The cross-compiler has generated COFF v2 files for TMS320C3X/C4X with little-endian headers matching the endianness of our building host machine (Windows XP x86)

\noindent The host machine configurations used to test both compilation and run of the simulator are:
\begin{itemize}
\item Redhat Linux RHEL4 x86/gcc 3.4.6 (32-bit little-endian machine)
\item Mandriva Linux 2009.1 x86/gcc 4.3.2 (32-bit little-endian machine)
\item Ubuntu Linux 7.04 powerpc/gcc 4.1.2 (32-bit big-endian machine)
\item Ubuntu Linux 9.04 AMD64/x86\_64/gcc 4.3.3 (64-bit little-endian machine)
\end{itemize}

The following developement board (see Figures~\ref{fig:tms320c3x_board}~and~\ref{fig:tms320c3x_jtag_emu}) has been used to compare the simulator results against a real TMS320C3X DSP:
\begin{itemize}
\item A D.SignT DK.VC33-150-S2 development board
\item A D.SignT D.Module.VC33-150-S2 module including a TI TMS320VC33PGE at 150 Mhz
\item A 256K 32 bits SRAM with 1 Wait state
\item A 512K 8 bits Flash Memory
\item A Spectrum Digital XDS510USB JTAG Emulator
\item Code Composer IDE 4.10.36 SP2 C3X'C4X for Windows
\end{itemize}

The UNISIM TMS320C3X has been validated using integer benchmarks, floating point benchmarks, and unit tests of individual instructions.
The next sections provide details about the validation process.

\subsection{Integer benchmarks}

\subsubsection{Fibonacci}

This benchmarks recursively (and quite inefficiently) computes the Fibonacci numbers:

\indent $F_1=1$
\newline
\indent $F_2=1$
\newline
\indent $F_n = F_{n - 2} + F_{n - 1}$ where $n > 2$
\newline

This benchmark requires TI C I/O service enabled to run in the TMS320C3X simulator.
A precompiled binary (\texttt{fibo.out}) is provided together with a GNU Make compatible \texttt{Makefile}.
A simulation configuration (\texttt{sim\_config.xml}) for this simulator is also provided, so that simulator can run the benchmark:

\begin{verbatim}
$ tms320c3x -c sim_config.xml
\end{verbatim}

\noindent The expected output on the screen of the benchmarks is:

\begin{verbatim}
Fibo(1)=1 (0x1)
Fibo(2)=1 (0x1)
Fibo(3)=2 (0x2)
Fibo(4)=3 (0x3)
Fibo(5)=5 (0x5)
Fibo(6)=8 (0x8)
Fibo(7)=13 (0xd)
Fibo(8)=21 (0x15)
Fibo(9)=34 (0x22)
Fibo(10)=55 (0x37)
Fibo(11)=89 (0x59)
Fibo(12)=144 (0x90)
Fibo(13)=233 (0xe9)
Fibo(14)=377 (0x179)
Fibo(15)=610 (0x262)
Fibo(16)=987 (0x3db)
Fibo(17)=1597 (0x63d)
Fibo(18)=2584 (0xa18)
Fibo(19)=4181 (0x1055)
Fibo(20)=6765 (0x1a6d)
Fibo(21)=10946 (0x2ac2)
Fibo(22)=17711 (0x452f)
Fibo(23)=28657 (0x6ff1)
Fibo(24)=46368 (0xb520)
Fibo(25)=75025 (0x12511)
Fibo(26)=121393 (0x1da31)
Fibo(27)=196418 (0x2ff42)
Fibo(28)=317811 (0x4d973)
Fibo(29)=514229 (0x7d8b5)
Fibo(30)=832040 (0xcb228)
Fibo(31)=1346269 (0x148add)
Fibo(32)=2178309 (0x213d05)
Fibo(33)=3524578 (0x35c7e2)
Fibo(34)=5702887 (0x5704e7)
\end{verbatim}

\subsubsection{Quick sort}

This benchmark sorts 65536 integer numbers using the quick sort recursive algorithm.
The input data set is in file \texttt{random.txt} that contains random generated integer numbers.
The output data set after the benchmark run is in file \texttt{sort.sim.txt}.

This benchmark requires TI C I/O service enabled to run in the TMS320C3X simulator.
A precompiled binary (\texttt{quicksort.out}) is provided together with a GNU Make compatible \texttt{Makefile}.
A simulation configuration (\texttt{sim\_config.xml}) for this simulator is also provided, so that simulator can run the benchmark:

\begin{verbatim}
 $ tms320c3x -c sim_config.xml
\end{verbatim}

\noindent The expected output data set is in file \texttt{sort.ref.txt}.

\subsubsection{CRC32 (check sum)}

This benchmark is based on CRC32 benchmark from MiBench Version 1.0 (\url{http://www.eecs.umich.edu/mibench}).
It performs a 32-bit Cyclic Redundancy Check (CRC) on a file. CRC checks are often used to detect errors in data transmission.
The benchmark reads file \texttt{large.pcm} and print the check sum on the screen

This benchmark requires TI C I/O service enabled to run in the TMS320C3X simulator.
A precompiled binary is provided together with a GNU Make compatible Makefile.
A simulation configuration (\texttt{sim\_config.xml}) for this simulator is also provided, so that simulator can run the benchmark:

\begin{verbatim}
$ tms320c3x -c sim_config.xml
\end{verbatim}

\noindent The expected output on the screen of the benchmarks is in file ref.txt:

\begin{verbatim}
32 BIT ANSI X3.66 CRC checksum:
Opening input file "large.pcm"
Total number of bytes read: 26611200
CRC32: dc8b7c2a
\end{verbatim}

\subsubsection{Rijndael (encryption/decryption)}

This benchmark is based on Rijndael benchmark from MiBench Version 1.0 (\url{http://www.eecs.umich.edu/mibench}).
Rijndael was selected as the National Institute of Standards and Technologies Advanced Encryption Standard (AES).
It is a block cipher with the option of 128-, 192-, and 256-bit keys and blocks.

In this benchmark, encryption is followed by decryption so that input data set and output data set should be identical.
The benchmark uses this hexadecimal encryption key:
\begin{verbatim}
1234567890abcdeffedcba09876543211234567890abcdeffedcba0987654321
\end{verbatim}
The benchmark reads file \texttt{input\_large.asc}, and encrypt it into file \texttt{output\_large.sim.enc}.
It decrypts \texttt{output\_large.sim.enc} into file \texttt{output\_large.sim.dec}.

This benchmark requires TI C I/O service enabled to run in the TMS320C3X simulator.
A precompiled binary (\texttt{rijndael.out}) is provided together with a GNU Make compatible Makefile.
A simulation configuration (\texttt{sim\_config.xml}) for this simulator is also provided, so that simulator can run the benchmark:

\begin{verbatim}
$ tms320c3x -c sim_config.xml
\end{verbatim}

It is expected that files \texttt{input\_large.asc} and \texttt{output\_large.sim.dec} be identical after the benchmark run.

\subsubsection{Sha (encryption/decryption)}

This benchmark is based on SHA benchmark from MiBench Version 1.0 (\url{http://www.eecs.umich.edu/mibench}).
SHA is the secure hash algorithm that produces a 160-bit message digest for a given input. It is often
used in the secure exchange of cryptographic keys and for generating digital signatures. It is also used in the
well-known MD4 and MD5 hashing functions.

The benchmark its input data set from file \texttt{input\_large.asc} and prints the SHA digest on the screen.

A precompiled binary (\texttt{sha.out}) is provided together with a GNU Make compatible Makefile.
A simulation configuration (\texttt{sim\_config.xml}) for this simulator is also provided, so that simulator can run the benchmark:

\begin{verbatim}
$ tms320c3x -c sim_config.xml
\end{verbatim}

The expected output on the screen of the benchmark is in file ref.txt:

\begin{verbatim}
NIST Secure Hash Algorithm:
Opening input file "input_large.asc"
SHA digest:
fbac40bd cb5fff1d bf7fda22 b3b7af61 278263fc
\end{verbatim}

\subsubsection{ADPCM (sound encoding/decoding)}

This benchmark is based on ADPCM benchmark from MiBench Version 1.0 (\url{http://www.eecs.umich.edu/mibench}).
It performs ADPCM encoding/decoding. Adaptive Differential Pulse Code Modulation (ADPCM) is a variation
of the well-known standard Pulse Code Modulation (PCM). A common implementation takes 16-bit linear
PCM samples and converts them to 4-bit samples, yielding a compression rate of 4:1. The input data are
small and large speech samples.
The ADPCM coder benchmark reads file \texttt{large.pcm} and writes the compressed data in file \texttt{output\_large.sim.adpcm}.
The ADPCM decoder benchmark reads file \texttt{large.adpcm} and writes the uncompressed data in file \texttt{output\_large.sim.pcm}.

This benchmark requires TI C I/O service enabled to run in the TMS320C3X simulator.
Precompiled binaries (\texttt{coder.out} and \texttt{decoder.out}) are provided together with a GNU Make compatible Makefile.
Simulation configurations (\texttt{coder\_sim\_config.xml} and \texttt{decoder\_sim\_config.xml})) for this simulator are also provided, so that simulator can run the benchmarks:

\begin{verbatim}
$ tms320c3x -c coder_sim_config.xml
$ tms320c3x -c decoder_sim_config.xml
\end{verbatim}

The expected output data set of the ADPCM coder benchmark is in file \texttt{output\_large.ref.adpcm}.
The expected output data set of the ADPCM decoder benchmark is in file \texttt{output\_large.ref.pcm}.

\subsubsection{DCT/Quantization (image processing)}

This benchmark is based on XVID video codec (\url{http://www.xvid.org}).
The benchmarks has the following steps that are the base of the JPEG lossy image compression standard:
\begin{enumerate}
\item Load a Windows 24-bit RGB Bitmap from a .bmp file;
\item Convert from RGB to YUV 4:4:4 for each 8x8 pixel blocks;
\item Compute a DCT on each 8x8 pixel blocks;
\item Quantize each 8x8 pixels blocks;
\item Dequantize each 8x8 pixels blocks;
\item Compute an iDCT on each 8x8 pixel blocks;
\item Convert from YUV 4:4:4 to RGB each 8x8 pixel blocks
\item Save the resulting Windows 24-bit RGB bitmap into a .bmp file
\end{enumerate}

The benchmark reads the input image from file \texttt{image.bmp} and the quantization matrix from file \texttt{quant\_mat.txt}.
It save the resulting image in file \texttt{output\_image.sim.bmp}

This benchmark requires TI C I/O service enabled to run in the TMS320C3X simulator.
A precompiled binary (\texttt{dct\_quant.out}) is provided together with a GNU Make compatible Makefile.
A simulation configuration (\texttt{sim\_config.xml}) for this simulator is also provided, so that simulator can run the benchmark:

\begin{verbatim}
$ tms320c3x -c sim_config.xml
\end{verbatim}

The expected output image is in file \texttt{output\_image.ref.bmp}.

\subsection{Floating point benchmarks}

This part is not yet available.

\subsection{Instruction level unit tests}

This section presents the validation process of UNISIM TMS320C3X simulator at the instruction level.
For that purpose, a testing environment has been developped to allow testing individual instructions.
Testing an instruction involves writing some "glue" code around the instruction under test to provide it with the input operands read from the host filesystem.
Additionally the "glue" code has to save instruction output operands into a file on the host filesystem, so that results of instruction under test can be observed.
A unit test generator that is part of the testing environment, automatically generates that "glue" code, making writing and maintaining the instruction level unit test easier.
The next sections present the validation process and the provided testing environment.

\subsubsection{Validation process}

For the purpose of validating the UNISIM TMS320C3X simulator, a factorial plan has been established. Lot of instruction alternatives have been tested (several condition codes and addressing modes).
\noindent The conditional instructions have 20 possible conditions:\\
\texttt{u}, \texttt{lo}, \texttt{ls}, \texttt{hi}, \texttt{hs}, \texttt{eq}, \texttt{ne}, \texttt{lt}, \texttt{le}, \texttt{gt}, \texttt{ge}, \texttt{nv}, \texttt{v}, \texttt{nuf}, \texttt{uf}, \texttt{nlv}, \texttt{lv}, \texttt{nluf}, \texttt{luf}, \texttt{zuf}.\\
\noindent Instructions with indirect addressing mode have 26 alternatives for each indirect operand:\\
\texttt{*+ar$_n$(disp)}, \texttt{*-ar$_n$(disp)}, \texttt{*++ar$_n$(disp)}, \texttt{*--ar$_n$(disp)}, \texttt{*ar$_n$++(disp)}, \texttt{*ar$_n$--(disp)}, \texttt{*ar$_n$++(disp)\%}, \texttt{*ar$_n$(disp)\%}, \texttt{*+ar$_n$(ir0)}, \texttt{*-ar$_n$(ir0)}, \texttt{*++ar$_n$(ir0)}, \texttt{*--ar$_n$(ir0)}, \texttt{*ar$_n$++(ir0)}, \texttt{*ar$_n$--(ir0)}, \texttt{*ar$_n$++(ir0)\%}, \texttt{*ar$_n$(ir0)\%}, \texttt{*+ar$_n$(ir1)}, \texttt{*-ar$_n$(ir1)}, \texttt{*++ar$_n$(ir1)}, \texttt{*--ar$_n$(ir1)}, \texttt{*ar$_n$++(ir1)}, \texttt{*ar$_n$--(ir1)}, \texttt{*ar$_n$++(ir1)\%}, \texttt{*ar$_n$(ir1)\%}, \texttt{*ar$_n$}, \texttt{*ar$_n$++(ir0)b}.\\

\subsubsection{Testing status}

\noindent Table below summarizes the testing status of all instructions:

\begin{center}
\tablehead{\hline
\multicolumn{1}{|c|}{\textbf{Instruction}} & \multicolumn{1}{|c|}{\textbf{Tested?}} & \multicolumn{1}{|c|}{\textbf{Testing method(s)/Description}}\\
\hline}
\tabletail{\hline}
\begin{supertabular}{|p{7.0cm}|p{1.0cm}|p{7.0cm}|}
\multicolumn{3}{|c|}{\textbf{lde}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{lde reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{lde dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{lde indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{lde imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{ldf}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ldf reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ldf dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ldf indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ldf imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{ldf\textit{cond}}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ldf\textit{cond} reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2000 unit tests ($20_{cond} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ldf\textit{cond} dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2000 unit tests ($20_{cond} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ldf\textit{cond} indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{52K unit tests ($26_{indir} \times 20_{cond} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ldf\textit{cond} imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{ldi}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ldi reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ldi dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ldi indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ldi imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{ldi\textit{cond}}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ldi\textit{cond} reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2000 unit tests ($20_{cond} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ldi\textit{cond} dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2000 unit tests ($20_{cond} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ldi\textit{cond} indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{52K unit tests ($26_{indir} \times 20_{cond} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ldi\textit{cond} imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{ldm}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ldm reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ldm dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ldm indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ldm imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{ldp}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ldp src}} & \multicolumn{1}{p{1.0cm}|}{No} & \multicolumn{1}{p{7.0cm}|}{}\\
\hline
\multicolumn{3}{|c|}{\textbf{pop}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{pop reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{All benchmarks}\\
\hline
\multicolumn{3}{|c|}{\textbf{popf}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{popf reg}} & \multicolumn{1}{p{1.0cm}|}{No} & \multicolumn{1}{p{7.0cm}|}{}\\
\hline
\multicolumn{3}{|c|}{\textbf{push}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{push reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{All benchmarks}\\
\hline
\multicolumn{3}{|c|}{\textbf{pushf}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{pushf reg}} & \multicolumn{1}{p{1.0cm}|}{No} & \multicolumn{1}{p{7.0cm}|}{}\\
\hline
\multicolumn{3}{|c|}{\textbf{stf}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{stf reg, dir}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{stf reg, indir}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{sti}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{sti reg, dir}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{sti reg, indir}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{ldfi}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ldfi dir, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ldfi indir, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{ldii}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ldii dir, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ldii indir, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{sigi}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{sigi}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{stfi}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{stfi reg, dir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{stfi reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{stii}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{stii reg, dir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{stii reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{b\textit{cond}}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{b\textit{cond} reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2000 unit tests ($20_{cond} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{b\textit{cond} disp}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2000 unit tests ($20_{cond} \times 100_{rand}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{b\textit{cond}d}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{b\textit{cond}d reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2000 unit tests ($20_{cond} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{b\textit{cond}d disp}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2000 unit tests ($20_{cond} \times 100_{rand}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{br}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{br src}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{br}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{brd src}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{call}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{call src}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{call\textit{cond}}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{call\textit{cond} reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2000 unit tests ($20_{cond} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{call\textit{cond} disp}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2000 unit tests ($20_{cond} \times 100_{rand}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{db\textit{cond}}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{db\textit{cond} ar$_n$, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2000 unit tests ($20_{cond} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{db\textit{cond} ar$_n$, disp}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2000 unit tests ($20_{cond} \times 100_{rand}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{db\textit{cond}d}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{db\textit{cond}d ar$_n$, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2000 unit tests ($20_{cond} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{db\textit{cond}d ar$_n$, disp}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2000 unit tests ($20_{cond} \times 100_{rand}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{iack}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{iack dir}} & \multicolumn{1}{p{1.0cm}|}{No} & \multicolumn{1}{p{7.0cm}|}{}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{iack indir}} & \multicolumn{1}{p{1.0cm}|}{No} & \multicolumn{1}{p{7.0cm}|}{}\\
\hline
\multicolumn{3}{|c|}{\textbf{idle}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{idle}} & \multicolumn{1}{p{1.0cm}|}{No} & \multicolumn{1}{p{7.0cm}|}{}\\
\hline
\multicolumn{3}{|c|}{\textbf{nop}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{nop reg}} & \multicolumn{1}{p{1.0cm}|}{No} & \multicolumn{1}{p{7.0cm}|}{}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{nop indir}} & \multicolumn{1}{p{1.0cm}|}{No} & \multicolumn{1}{p{7.0cm}|}{}\\
\hline
\multicolumn{3}{|c|}{\textbf{reti\textit{cond}}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{reti\textit{cond}}} & \multicolumn{1}{p{1.0cm}|}{No} & \multicolumn{1}{p{7.0cm}|}{}\\
\hline
\multicolumn{3}{|c|}{\textbf{rets\textit{cond}}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{rets\textit{cond}}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2000 unit tests ($20_{cond} \times 100_{rand}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{rptb}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{rptb src}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{Benchmarks?}\\
\hline
\multicolumn{3}{|c|}{\textbf{rpts}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{rpts reg}} & \multicolumn{1}{p{1.0cm}|}{No} & \multicolumn{1}{p{7.0cm}|}{}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{rpts dir}} & \multicolumn{1}{p{1.0cm}|}{No} & \multicolumn{1}{p{7.0cm}|}{}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{rpts indir}} & \multicolumn{1}{p{1.0cm}|}{No} & \multicolumn{1}{p{7.0cm}|}{}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{rpts imm}} & \multicolumn{1}{p{1.0cm}|}{No} & \multicolumn{1}{p{7.0cm}|}{}\\
\hline
\multicolumn{3}{|c|}{\textbf{swi}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{swi}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{Decoded only}\\
\hline
\multicolumn{3}{|c|}{\textbf{trap\textit{cond}}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{trap\textit{cond} n}} & \multicolumn{1}{p{1.0cm}|}{No} & \multicolumn{1}{p{7.0cm}|}{}\\
\hline
\multicolumn{3}{|c|}{\textbf{absf}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{absf reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{absf dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{absf indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{absf imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{absi}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{absi reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{absi dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{absi indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{absi imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{addc}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{addc reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{addc dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{addc indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{addc imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{addf}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{addf reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{addf dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{addf indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{addf imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{addi}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{addi reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{addi dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{addi indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{addi imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{and}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{and reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{and dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{and indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{and imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{andn}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{andn reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{andn dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{andn indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{andn imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{ash}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ash reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ash dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ash indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ash imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{cmpf}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{cmpf reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{cmpf dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{cmpf indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{cmpf imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{cmpi}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{cmpi reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{cmpi dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{cmpi indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{cmpi imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{fix}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{fix reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{fix dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{fix indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{fix imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{float}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{float reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{float dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{float indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{float imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{lsh}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{lsh reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{lsh dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{lsh indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{lsh imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{mpyf}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyf reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyf dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyf indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyf imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{mpyi}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyi reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyi dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyi indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyi imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{negb}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{negb reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{negb dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{negb indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{negb imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{negf}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{negf reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{negf dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{negf indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{negf imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{negi}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{negi reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{negi dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{negi indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{negi imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{norm}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{norm reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{norm dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{norm indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{norm imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{not}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{not reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{not dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{not indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{not imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{or}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{or reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{or dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{or indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{or imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{rnd}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{rnd reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{rnd dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{rnd indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{rnd imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{rol}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{rol reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{rolc}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{rolc reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{ror}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ror reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{rorc}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{rorc reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{subb}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subb reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subb dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subb indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subb imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{subc}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subc reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subc dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subc indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subc imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{subf}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subf reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subf dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subf indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subf imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{subi}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subi reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subi dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subi indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subi imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{subrb}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subrb reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subrb dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subrb indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subrb imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{subrf}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subrf reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subrf dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subrf indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subrf imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{subri}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subri reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subri dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subri indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subri imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{tstb}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{tstb reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{tstb dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{tstb indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{tstb imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{xor}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{xor reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{10K unit tests ($10K_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{xor dir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{xor indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{2600 unit tests (26$_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{xor imm, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{5 unit tests (5$_{imm}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{addc3}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{addc3 reg, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{addc3 indir, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{addc3 reg, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{addc3 indir, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{addf3}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{addf3 reg, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{addf3 indir, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{addf3 reg, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{addf3 indir, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{addi3}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{addi3 reg, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{addi3 indir, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{addi3 reg, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{addi3 indir, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{and3}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{and3 reg, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{and3 indir, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{and3 reg, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{and3 indir, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{andn3}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{andn3 reg, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{andn3 indir, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{andn3 reg, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{andn3 indir, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{ash3}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ash3 reg, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ash3 indir, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ash3 reg, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ash3 indir, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{cmpf3}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{cmpf3 reg, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{cmpf3 indir, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{cmpf3 reg, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{cmpf3 indir, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{cmpi3}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{cmpi3 reg, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{cmpi3 indir, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{cmpi3 reg, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{cmpi3 indir, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{lsh3}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{lsh3 reg, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{lsh3 indir, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{lsh3 reg, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{lsh3 indir, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{mpyf3}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyf3 reg, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyf3 indir, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyf3 reg, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyf3 indir, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{mpyi3}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyi3 reg, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyi3 indir, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyi3 reg, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyi3 indir, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{or3}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{or3 reg, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{or3 indir, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{or3 reg, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{or3 indir, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{subb3}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subb3 reg, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subb3 indir, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subb3 reg, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subb3 indir, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{subf3}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subf3 reg, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subf3 indir, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subf3 reg, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subf3 indir, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{subi3}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subi3 reg, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subi3 indir, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subi3 reg, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subi3 indir, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{tstb3}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{tstb3 reg, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{tstb3 indir, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{tstb3 reg, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{tstb3 indir, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{xor3}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{xor3 reg, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{xor3 indir, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{xor3 reg, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{xor3 indir, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{Yes} & \multicolumn{1}{p{7.0cm}|}{100 unit tests ($1_{indir} \times 1_{indir} \times 100_{rand}$)}\\
\hline
\multicolumn{3}{|c|}{\textbf{absf}\texttt{~||~}\textbf{stf}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{absf indir, reg || stf reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{absf reg, reg || stf reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{absi}\texttt{~||~}\textbf{sti}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{absi indir, reg || sti reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{absi reg, reg || sti reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{addf3}\texttt{~||~}\textbf{stf}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{addf3 reg, indir, reg || stf reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{addf3 reg, reg, reg || stf reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{addi3}\texttt{~||~}\textbf{sti}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{addi3 reg, indir, reg || sti reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{addi3 reg, reg, reg || sti reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{and3}\texttt{~||~}\textbf{sti}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{and3 reg, indir, reg || sti reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{and3 reg, reg, reg || sti reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{ash3}\texttt{~||~}\textbf{sti}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ash3 count, indir, reg || sti reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ash3 count, reg, reg || sti reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{fix}\texttt{~||~}\textbf{sti}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{fix indir, reg || sti reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{fix reg, reg || sti reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{float}\texttt{~||~}\textbf{sti}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{float indir, reg || sti reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{float reg, reg || sti reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{ldf}\texttt{~||~}\textbf{ldf}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ldf indir, reg || ldf indir, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ldf reg, reg || ldf indir, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{ldf}\texttt{~||~}\textbf{stf}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ldf indir, reg || stf reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ldf reg, reg || stf reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{ldi}\texttt{~||~}\textbf{ldi}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ldi indir, reg || ldi indir, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ldi reg, reg || ldi indir, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{ldi}\texttt{~||~}\textbf{sti}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ldi indir, reg || sti reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{ldi reg, reg || sti reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{lsh3}\texttt{~||~}\textbf{sti}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{lsh3 count, indir, reg || sti reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{lsh3 count, reg, reg || sti reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{mpyf3}\texttt{~||~}\textbf{addf3}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyf3 indir, indir, reg || addf3 reg, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyf3 indir, reg, reg || addf3 indir, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyf3 indir, reg, reg || addf3 reg, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyf3 reg, indir, reg || addf3 indir, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyf3 reg, indir, reg || addf3 reg, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyf3 reg, reg, reg || addf3 indir, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{mpyf3}\texttt{~||~}\textbf{stf}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyf3 indir, reg, reg || stf reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyf3 reg, reg, reg || stf reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{mpyf3}\texttt{~||~}\textbf{subf3}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyf3 indir, indir, reg || subf3 reg, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyf3 indir, reg, reg || subf3 indir, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyf3 indir, reg, reg || subf3 reg, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyf3 reg, indir, reg || subf3 indir, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyf3 reg, indir, reg || subf3 reg, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyf3 reg, reg, reg || addf3 indir, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{mpyi3}\texttt{~||~}\textbf{addi3}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyi3 indir, indir, reg || addi3 reg, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyi3 indir, reg, reg || addi3 indir, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyi3 indir, reg, reg || addi3 reg, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyi3 reg, reg, reg || addi3 indir, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyi3 indir, reg, reg || addi3 reg, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyi3 reg, reg, reg || addi3 indir, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyi3 reg, reg, reg || addi3 reg, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyi3 reg, reg, reg || addi3 reg, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{mpyi3}\texttt{~||~}\textbf{sti}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyi3 indir, reg, reg || sti reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyi3 reg, reg, reg || sti reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{mpyi3}\texttt{~||~}\textbf{subi3}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyi3 indir, indir, reg || subi3 reg, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyi3 indir, reg, reg || subi3 indir, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyi3 indir, reg, reg || subi3 reg, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyi3 reg, reg, reg || subi3 indir, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyi3 indir, reg, reg || subi3 reg, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyi3 reg, reg, reg || subi3 indir, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyi3 reg, reg, reg || subi3 reg, indir, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{mpyi3 reg, reg, reg || subi3 reg, reg, reg}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{negf}\texttt{~||~}\textbf{stf}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{negf indir, reg || stf reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{negf reg, reg || stf reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{negi}\texttt{~||~}\textbf{sti}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{negi indir, reg || sti reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{negi reg, reg || sti reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{not}\texttt{~||~}\textbf{sti}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{not indir, reg || sti reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{not reg, reg || sti reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{or3}\texttt{~||~}\textbf{sti}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{or3 reg, indir, reg || sti reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{or3 reg, reg, reg || sti reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{stf}\texttt{~||~}\textbf{stf}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{stf reg, indir || stf reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{stf reg, reg || stf reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{sti}\texttt{~||~}\textbf{sti}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{sti reg, indir || sti reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{sti reg, reg || sti reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{subf3}\texttt{~||~}\textbf{stf}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subf3 reg, indir, reg || stf reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subf3 reg, reg, reg || stf reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{subi3}\texttt{~||~}\textbf{sti}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subi3 reg, indir, reg || sti reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{subi3 reg, reg, reg || sti reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{xor3}\texttt{~||~}\textbf{sti}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{xor3 indir, reg, reg || sti reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{xor3 reg, reg, reg || sti reg, indir}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{idle2}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{idle2}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{lopower}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{lowpower}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\hline
\multicolumn{3}{|c|}{\textbf{maxspeed}}\\
\hline
\multicolumn{1}{|p{7.0cm}|}{\scriptsize \texttt{maxspeed}} & \multicolumn{1}{p{1.0cm}|}{?} & \multicolumn{1}{p{7.0cm}|}{?}\\
\end{supertabular}
\end{center}

\subsubsection{Unit test generator}

To ease writing each unit test of the above test plan, a unit test generator has been developped, see Figure~\ref{fig:tms320c3x_unit_test_generator}.

\begin{figure}[!h]
	\begin{center}
		\begin{minipage}{\textwidth}
			\begin{minipage}{8.0cm}
				\begin{center}
					\includegraphics[width=8.0cm]{tms320c3x/fig_unit_test_generator.pdf}
					\caption{\label{fig:tms320c3x_unit_test_generator}UNISIM TMS320C3X unit test generator.}
				\end{center}
			\end{minipage}
			\begin{minipage}{8.0cm}
				\begin{center}
					\includegraphics[width=8.0cm]{tms320c3x/fig_unit_test.pdf}
					\caption{\label{fig:tms320c3x_unit_test} A generated unit test.}
				\end{center}
			\end{minipage}
		\end{minipage}
		\vspace{0.5cm}
		\begin{minipage}{\textwidth}
			\begin{center}
				\input{tms320c3x/assembly_pattern}
				\caption{\label{fig:tms320c3x_assembly_pattern} Example of assembly pattern.}
			\end{center}
		\end{minipage}
		\vspace{0.5cm}
		\begin{minipage}{\textwidth}
			\begin{center}
				\tablehead{\hline}
				\tabletail{\hline}
				\begin{supertabular}{|p{16cm}|}
				\multicolumn{1}{|p{16cm}|}{{\scriptsize \texttt{; \it {-}{-}{-}{-}~INPUTS~{-}{-}{-}{-}}\newline
				\texttt{; \it ~r0:~a~32-bit~integer~register}\newline
				\texttt{; \it ~ar2:~an~auxiliary~register~pointing~to~an~array~of~16~32-bit~floating~point~values}\newline
				\texttt{; \it ~r1:~a~32-bit~integer~register~(value~for~st)}\newline
				\texttt{; \it ~r2:~a~40-bit~floating~point~register}\newline
				\texttt{; \it {-}{-}{-}{-}~OUTPUTS~{-}{-}{-}{-}}\newline
				\texttt{; \it ~ar4:~an~auxiliary~register}\newline
				\texttt{; \it ~r2:~a~40-bit~floating~point~register}\newline
				\texttt{; \it ~r3:~a~32-bit~integer~register~(value~of~st)}\newline
				\texttt{~~ldiu~5,~bk~~~~~~~~~~~~~~~~~; \ding{202} \it ~load~block~size~(should~be~at~most~8)}\newline
				\texttt{~~and~5~-~1,~r0~~~~~~~~~~~~~~; \ding{203} \it ~crop~random~value~between~0~and~bk~-~1}\newline
				\texttt{~~ldiu~r0,~ir0~~~~~~~~~~~~~~~; \ding{204} \it ~load~ir0~with~this~random~value}\newline
				\texttt{~~ldiu~ar2,~ar4~~~~~~~~~~~~~~; \ding{205} \it ~load~a~pointer~to~a~buffer~of~16~words}\newline
				\texttt{~~addi~7,~ar4~~~~~~~~~~~~~~~~; \ding{206}}\newline
				\texttt{~~andn~7,~ar4~~~~~~~~~~~~~~~~; \ding{207} \it ~align~circular~buffer~start~on~block~size}\newline
				\texttt{~~ldiu~r1,~st~~~~~~~~~~~~~~~~; \ding{208}}\newline
				\texttt{~~addf~*ar4++(ir0)\%,~r2~~~~~~; \ding{209} \it ~$\leftarrow$~instruction~under~test}\newline
				\texttt{~~ldiu~st,~r3~~~~~~~~~~~~~~~~; \ding{210}}\newline
				\texttt{}}}\\
				\end{supertabular}
				\caption{\label{fig:tms320c3x_generated_assembly} Generated assembly from assembly pattern of Figure~\ref{fig:tms320c3x_assembly_pattern} and substitution strings \texttt{"5"}, \texttt{"7"}, and \texttt{"addf"}.}
			\end{center}
		\end{minipage}
	\end{center}
\end{figure}

The generator needs an assembly pattern and some substitution strings to generate the unit test source code, that is:
\begin{itemize}
\item an assembly function \texttt{unit\_test} (in file \texttt{test.asm}) with the C calling convention and stack parameter passing convention
\item some random inputs for function \texttt{unit\_test} (\texttt{random.txt}).
\item a testbench written in C (\texttt{main.c}) that in a loop, reads inputs, calls function \texttt{unit\_test}, and write outputs.
\end{itemize}

An Assembly pattern is an assembly source code with special tags. These tags start with character \texttt{\%}. Most of them represent input/outputs that are substituted by real processor registers during assembly source code generation. Tag \texttt{\%subst} is substituted by a substitution string passed as command line argument to the generator.
Tag \texttt{\%clobber} says to the generator that assembly pattern explicitely clobber register following that tag and that the generator should not allocate that register while substituing inputs and outputs.
Table~\ref{table:tms320c3x_assembly_patterns_tags} lists the available tags.

\begin{table}[p]
\begin{center}
\begin{tabular}{|c|c|l|}
\hline
\textbf{Tag} & \textbf{Type} & \textbf{Storage type}\\
\hline
\texttt{\scriptsize \%src\_int\_reg} & {\scriptsize source} & {\scriptsize 32-bit integer register}\\
\hline
\texttt{\scriptsize \%src\_float\_reg} & {\scriptsize source} & {\scriptsize 40-bit floating-point register}\\
\hline
\texttt{\scriptsize \%src\_aux\_reg} & {\scriptsize source} & {\scriptsize auxiliary register}\\
\hline
\texttt{\scriptsize \%st\_in} & {\scriptsize source} & {\scriptsize 32-bit integer register (value for st)}\\
\hline
\texttt{\scriptsize \%dst\_int\_reg} & {\scriptsize destination} & {\scriptsize 32-bit integer register}\\
\hline
\texttt{\scriptsize \%dst\_float\_reg} & {\scriptsize destination} & {\scriptsize 40-bit floating-point register}\\
\hline
\texttt{\scriptsize \%dst\_aux\_reg} & {\scriptsize destination} & {\scriptsize auxiliary register}\\
\hline
\texttt{\scriptsize \%st\_out} & {\scriptsize destination} & {\scriptsize 32-bit integer register (value of st)}\\
\hline
\texttt{\scriptsize \%src\_dst\_int\_reg} & {\scriptsize source \& destination} & {\scriptsize 32-bit integer register}\\
\hline
\texttt{\scriptsize \%src\_dst\_float\_reg} & {\scriptsize source \& destination} & {\scriptsize 40-bit floating-point register}\\
\hline
\texttt{\scriptsize \%src\_dst\_aux\_reg} & {\scriptsize source \& destination} & {\scriptsize auxiliary register}\\
\hline
\texttt{\scriptsize \%tmp\_int\_reg} & {\scriptsize temporary} & {\scriptsize 32-bit integer register}\\
\hline
\texttt{\scriptsize \%tmp\_float\_reg} & {\scriptsize temporary} & {\scriptsize 40-bit floating-point register}\\
\hline
\texttt{\scriptsize \%tmp\_aux\_reg} & {\scriptsize temporary} & {\scriptsize auxiliary register}\\
\hline
\texttt{\scriptsize \%src\_int\_buf[dim]} & {\scriptsize source} & {\scriptsize auxiliary register pointing to an array of \textit{dim} 32-bit integer values}\\
\hline
\texttt{\scriptsize \%dst\_int\_buf[dim]} & {\scriptsize destination} & {\scriptsize auxiliary register pointing to an array of \textit{dim} 32-bit integer values}\\
\hline
\texttt{\scriptsize \%src\_float\_buf[dim]} & {\scriptsize source} & {\scriptsize auxiliary register pointing to an array of \textit{dim} 32-bit floating-point values}\\
\hline
\texttt{\scriptsize \%dst\_float\_buf[dim]} & {\scriptsize destination} & {\scriptsize auxiliary register pointing to an array of \textit{dim} 32-bit floating-point values}\\
\hline
\texttt{\scriptsize \%subst} & {\scriptsize substitution} & {\scriptsize N/A}\\
\hline
\texttt{\scriptsize \%clobber reg} & {\scriptsize clobber} & {\scriptsize N/A}\\
\hline
\texttt{\scriptsize \%0, \%1, \%2, \ldots} & {\scriptsize reference} & {\scriptsize N/A}\\
\hline
\end{tabular}
\caption{UNISIM TMS320C3X unit test generator assembly patterns tags.}
\label{table:tms320c3x_assembly_patterns_tags}
\end{center}
\end{table}

Figure~\ref{fig:tms320c3x_assembly_pattern} shows an example of assembly pattern while Figure~\ref{fig:tms320c3x_generated_assembly} shows the core of generated assembly. During the generation process, each assembly pattern tag are substituted with real processor registers or substitution strings:
\begin{enumerate}
\item[{\large \ding{202}}] \texttt{\%subst} is substituted by integer constant \texttt{5} passed as command line argument of the generator;
\item[{\large \ding{203}}] \texttt{\%0} is substituted as in {\large \ding{202}}, while \texttt{\%src\_int\_reg} is substituted with register \texttt{r0};
\item[{\large \ding{204}}] \texttt{\%clobber ir0} is substituted with register \texttt{ir0} and register ir0 is marked as clobbered;
\item[{\large \ding{205}}] \texttt{\%src\_float\_buf[16]} is substituted with register \texttt{ar2} that points to an array of 16 32-bit floating-point values allocated on the stack; \texttt{\%dst\_aux\_reg} is substituted with register \texttt{ar4};
\item[{\large \ding{206}}] \texttt{\%subst} is substituted with integer constant \texttt{7} passed as command line argument to the generator; \texttt{\%6} is substituted as \texttt{\%dst\_aux\_reg} in {\large \ding{205}};
\item[{\large \ding{207}}] \texttt{\%7} is substituted as \texttt{\%subst} in {\large \ding{206}} and \texttt{\%6} is substituted as \texttt{\%dst\_aux\_reg} in {\large \ding{205}};
\item[{\large \ding{208}}] \texttt{\%st\_in} is substituted with register \texttt{r1} and register \texttt{r1} is marked as containing state of register st to enable pretty printing of its content, while \texttt{\%clobber st} is substituted by register \texttt{st} and register \texttt{st} is marked as clobbered;
\item[{\large \ding{209}}] \texttt{\%6} is substituted as \texttt{\%dst\_aux\_reg} in {\large \ding{205}}; \texttt{\%\%} is substituted with \texttt{\%}; \texttt{\%src\_dst\_float\_reg} is substituted with register \texttt{r2};
\item[{\large \ding{210}}] \texttt{\%st\_out} is substituted with register \texttt{r3} and register \texttt{r3} is marked as containing state of register st to enable pretty printing of its content.
\end{enumerate}

The random inputs are obtained with a KISS (Keep It Simple Stupid) random number generator (see \url{http://www.math.niu.edu/\~rusin/known-math/99/RNG}) embedded in the unit tests generator. The generator generates a uniform distribution for integer numbers. Table~\ref{table:tms320c3x_unit_test_float_distribution} shows the distribution for the floating point numbers.

\begin{table}[p]
\begin{center}
\begin{tabular}{|c|c|}
\hline
\textbf{Category} & \textbf{Probability}\\
\hline
-inf & 1/37\\
\hline
smallest negative number & 1/37\\
\hline
zero & 1/37\\
\hline
real zero & 1/37\\
\hline
smallest positive number & 1/37\\
\hline
near to integer & 2/37\\
\hline
+inf & 1/37\\
\hline
small & 2/37\\
\hline
large & 2/37\\ 
\hline
mantissa near previously generated, fully random exponent & 5/37\\
\hline
exponent near previously generated, fully random mantissa & 5/37\\
\hline
float near previously generated & 5/37\\
\hline
fully random & 10/37\\
\hline
\end{tabular}
\caption{UNISIM TMS320C3X unit test generator floating point distribution.}
\label{table:tms320c3x_unit_test_float_distribution}
\end{center}
\end{table}

The unit test source code can be compiled for the development board, and run on both the development board and the UNISIM TMS320C3X simulator.
As a unit test uses the TI C I/O functions, it can reads inputs and write outputs from/to files of the host file system, see Figure~\ref{fig:tms320c3x_unit_test}. Such a capability has considerably reduced the complexity of testing the assembly pattern under test on both the development board and the UNISIM TMS320C3X simulator.

A unit test reads manually selected inputs from file \texttt{input.txt} and some random generated inputs from file \texttt{random.txt}. It writes outputs into file \texttt{output.txt}.

\newpage
\subsubsection{The testing environment}

A testing environment has been set up using the unit test generator and assembly patterns.
A GNU Makefile is provided to run the unit tests on both the development board (our reference) and the UNISIM TMS320C3X simulator.
File \texttt{output.txt} (the unit test output) is renamed \texttt{output.ref} when run on the development board or \texttt{output.sim} when run on the UNISIM TMS320C3X simulator.

\noindent The list of supported Makefile targets is the following:

\begin{itemize}
\item \texttt{generator(.exe)}: compile the unit tests generator (\texttt{generator(.exe)})
\item \texttt{compile}: compile the unit tests for the TMS320C3X development board (objects/binaries are \texttt{test.obj}, \texttt{main.obj} and \texttt{test.out})
\item \texttt{rnd}: generate the random input files (\texttt{random.txt}) 
\item \texttt{execute}: execute the unit tests on the TMS320C3X development board (\texttt{EXECUTE} must be set) (execution result is in \texttt{output.ref})
\item \texttt{simulate}: run the simulator (SIMULATE must be set) (simulation results are in \texttt{output.sim})                                    
\item \texttt{check}: compare simulator vs. reference (depends on diff) (check result is in \texttt{output.check})
\item \texttt{diff}: generate difference between simulation vs. reference (depends on \texttt{execute} and \texttt{simulate}) (diff result is in \texttt{output.diff})
\item \texttt{regression-test}: launch a regression test of the UNISIM TMS320C3X simulator
\item \texttt{doc}: generate unit tests documentation (\texttt{unit\_tests.pdf})
\item \texttt{dist}: distribute the testing environment together with reference outputs (\texttt{output.ref})
\item \texttt{clean}: clean everything
\item \texttt{cleangen}: clean generator executable (\texttt{generator(.exe)})
\item \texttt{cleansrc}: clean TMS320C3X generated source files (\texttt{test.asm} and \texttt{main.c})
\item \texttt{cleanrnd}: clean generated random input files (\texttt{random.txt})
\item \texttt{cleanbin}: clean TMS320C3X executable files (\texttt{test.out})
\item \texttt{cleanobj}: clean TMS320C3X object files (\texttt{test.obj} and \texttt{main.obj})
\item \texttt{cleangel}: clean GEL scripts (\texttt{run.gel})
\item \texttt{cleansim}: clean simulation results (\texttt{output.sim})
\item \texttt{cleanref}: clean execution results (\texttt{output.ref})
\item \texttt{cleandiff}: clean diff files (\texttt{output.diff})
\item \texttt{cleancheck}: clean check files (\texttt{output.check})
\item \texttt{cleandoc}: clean latex files (\texttt{test.tex})
\end{itemize}

\noindent The following Makefile variables are available for tuning the Makefile:
\begin{itemize}
\item Mandatory:
	\begin{itemize}
	\item \texttt{SIMULATE}: path to the UNISIM TMS320C3X simulator binary
	\item \texttt{EXECUTE}: path to Code Composer executable (i.e. \texttt{cc\_app.exe})
	\item \texttt{DIST\_DIR}: path to destination directory for a distribution
	\end{itemize}
\item Optional:
	\begin{itemize}
	\item \texttt{COMPILER\_PREFIX}: prefix to add before to the compiler tools executables (default: empty)
	\end{itemize}
\end{itemize}

The provided Makefile uses a GNU bash script \texttt{factorial.sh}, that contains a factorial plan, to generate most of the Makefile rules in file \texttt{Makefile.aux}.
To obtain reference outputs from the developement board, do the following at the command prompt:
\begin{verbatim}
$ make execute EXECUTE=cc_app.exe
\end{verbatim}

Figure~\ref{fig:tms320c3x_cc} shows the testing environment running on Windows and launching unit tests on the development board.

\begin{figure}[!h]
	\begin{center}
		\begin{minipage}{\textwidth}
			\begin{minipage}{9.5cm}
				\begin{center}
					\includegraphics[width=9.0cm]{tms320c3x/fig_code_composer.jpg}
					\caption{\label{fig:tms320c3x_cc} GNU Make (on the left) launching unit tests on the development board using code composer (on the right)}
				\end{center}
			\end{minipage}
			\begin{minipage}{6.5cm}
				\begin{center}
		\includegraphics[width=6.0cm]{tms320c3x/fig_driver_error.jpg}
		\caption{\label{fig:tms320c3x_driver_error} VC33 device driver communication problem.}
				\end{center}
			\end{minipage}
		\end{minipage}
	\end{center}
\end{figure}

\textit{Note: You may experience frequent failures of the JTAG Emulator (red LED that indicates activity over USB get stuck), making Code Composer complain in a dialog box that it can't initialize target DSP, see Figure~\ref{fig:tms320c3x_driver_error}. Disconnect and reconnect the USB cable on the JTAG emulator, and then click button "Retry" to resume execution.}

\vspace{0.5cm}

To obtain simulation outputs from the UNISIM TMS320C3X simulator, do the following at the command prompt:
\begin{verbatim}
$ make simulate SIMULATE=path-to-tms320c3x
\end{verbatim}

\subsubsection{Regression tests}

The testing environment also acts as a regression test for UNISIM TMS320C3X simulator as the expected results (\texttt{output.ref}) are already provided in the testing environment.
To check that all unit tests successfully run on the UNISIM TMS320C3X simulator, do the following at the command prompt:
\begin{verbatim}
$ make generator
$ make regression-test SIMULATE=path-to-tms320c3x
\end{verbatim}

\noindent The result for each unit test is either \texttt{PASSED} or \texttt{FAILED}.\\
